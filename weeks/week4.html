<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>SPA 225 — Week 4 (Discussions)</title>
    <meta name="description" content="SPA 225 Discussions — Week 4" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="../style.css?v=3" />
  </head>

  <body>
    <a class="skip-link" href="#main">Skip to content</a>

    <header class="hero" role="banner">
      <div class="hero__inner">
        <h1 class="hero__title">SPA 225: Lying, swearing and breaking the rules</h1>
        <p class="hero__subtitle">Discussions</p>
      </div>
    </header>

    <main id="main" class="main" role="main">
      <nav class="page-nav" aria-label="Week navigation">
        <a class="nav-link" href="../index.html">← Back to weeks</a>

        <div class="nav-group" aria-label="Previous and next week">
          <a class="nav-link" href="./week3.html">← Prev</a>
          <a class="nav-link" href="./week5.html">Next →</a>
        </div>
      </nav>

      <header class="week-header">
        <h2 class="week-title">Week 4</h2>
        <!-- Optional: add dates here later -->
      </header>

      <section class="card" aria-labelledby="slides-title">
        <h3 id="slides-title" class="section-title">Slides and study material</h3>

        <div class="slides-embed" id="slides-week4" aria-label="Slides and materials container (Week 4)">
          <!-- START EDITABLE: SLIDES/STUDY MATERIAL -->
          <!-- Paste OneDrive embed iframe(s) and study content below -->

          <!-- NOTE (invisible to students):
               - Keep iframe width="100%" for responsive layout.
               - Use a meaningful iframe title for accessibility.
               - For external links, prefer: target="_blank" rel="noopener noreferrer".
          -->

          <!-- OneDrive placeholder: pega aquí tu link de embed -->
          <!--
          <iframe
            title="Week 4 slides (OneDrive)"
            src=""
            width="100%"
            height="520"
            frameborder="0"
            allowfullscreen
          ></iframe>
          -->

          <!-- END EDITABLE -->











<div class="ppt-embed">
  <iframe
    src="https://1drv.ms/p/c/8cc37472732c2d98/IQR0DTjwHI5CTYDRdI-RsGHyAc606Rr_SE1cYczvSRLnB6U"
    title="Presentación"
    loading="lazy"
    frameborder="0"
    scrolling="no"
    allowfullscreen
  ></iframe>
</div>

<style>
  /* SOLO afecta este embed */
  .ppt-embed{
    width: 100%;
    max-width: 1040px;     /* opcional */
    margin: 0 auto;

    border-radius: 18px;
    overflow: hidden;
    background: #fff;

    /* ✅ responsive */
    aspect-ratio: 16 / 9;

    box-shadow: 0 18px 55px rgba(0,0,0,.35);
    border: 1px solid rgba(255,255,255,.25);
  }

  .ppt-embed iframe{
    width: 100%;
    height: 100%;
    border: 0;
    display: block;
  }

  /* opcional: un poco más alto en móvil */
  @media (max-width: 600px){
    .ppt-embed{ aspect-ratio: 4 / 3; }
  }
</style>















          


          
        </div>
      </section>

      <section class="card" aria-labelledby="games-title">
        <h3 id="games-title" class="section-title">Games</h3>

        <section class="game-embed" id="game-week4" aria-label="Game embed area (Week 4)">
          <!-- START EDITABLE: GAMES -->
          <!-- Paste a full game block here (HTML + optional <style> + optional <script>) -->

          <!-- NOTE (invisible to students):
               - If your game includes CSS, namespace it inside #game-week4 or .game-embed
                 (example: #game-week4 .my-class { ... } ).
               - If your game includes JS, wrap it in an IIFE:
                 (() => { /* your game code */ })();
               - Avoid touching global styles (body, html) inside your game.
          -->

          <!-- END EDITABLE -->









<section id="vocab-match">
  <div class="vm-wrap" role="region" aria-label="Juego: conectar palabra con definición">
    <header class="vm-head">
      <h2 class="vm-title">Conecta el término con su definición</h2>
      <p class="vm-subtitle">
        Elige cómo conectar: <strong>arrastra</strong>, <strong>haz clic en un término y luego en una definición</strong>,
        o <strong>escribe la letra</strong> (A–J) al lado del término.
      </p>

      <div class="vm-controls" role="group" aria-label="Controles del juego">
        <button class="vm-btn" data-action="shuffle" aria-label="Mezclar">Mezclar</button>
        <button class="vm-btn vm-btn-primary" data-action="check" aria-label="Comprobar">Comprobar</button>
        <button class="vm-btn" data-action="reset" aria-label="Reiniciar">Reiniciar</button>
      </div>

      <div class="vm-status" aria-live="polite"></div>
    </header>

    <div class="vm-board" aria-label="Tablero de emparejamiento">
      <div class="vm-col">
        <div class="vm-colhead">
          <span class="vm-coltitle">Términos</span>
          <span class="vm-colhint" id="vmHintLeft">Arrastra, clic→clic, o escribe una letra.</span>
        </div>
        <ul class="vm-list" id="vmTerms" aria-label="Lista de términos"></ul>
      </div>

      <div class="vm-col">
        <div class="vm-colhead">
          <span class="vm-coltitle">Definiciones</span>
          <span class="vm-colhint" id="vmHintRight">Cada definición tiene una letra (A–J).</span>
        </div>
        <ul class="vm-list" id="vmDefs" aria-label="Lista de definiciones"></ul>
      </div>
    </div>

    <footer class="vm-footer">
      <details class="vm-help">
        <summary>¿Cómo se juega?</summary>
        <ul>
          <li><strong>Arrastrar:</strong> toma un término y suéltalo sobre la definición.</li>
          <li><strong>Clic→Clic:</strong> clic en un término y luego clic en una definición (o al revés).</li>
          <li><strong>Letras:</strong> escribe A–J al lado del término. (Al escribir, se conecta automáticamente).</li>
          <li>Presiona <strong>Comprobar</strong> para ver el resultado.</li>
        </ul>
      </details>
    </footer>
  </div>

  <style>
    /* ===== Scoped CSS: #vocab-match ===== */
    #vocab-match {
      --vm-bg: #0f1216;
      --vm-panel: #151a21;
      --vm-card: #121821;
      --vm-card2: #10161f;
      --vm-ink: #f3ead9;       /* crema */
      --vm-muted: rgba(243, 234, 217, 0.74);
      --vm-faint: rgba(243, 234, 217, 0.55);
      --vm-border: rgba(243, 234, 217, 0.16);
      --vm-border2: rgba(243, 234, 217, 0.10);
      --vm-shadow: 0 12px 30px rgba(0,0,0,0.35);
      --vm-radius: 18px;
      --vm-radius2: 14px;
      --vm-good: rgba(78, 210, 146, 0.22);
      --vm-bad: rgba(255, 110, 110, 0.18);
      --vm-focus: rgba(120, 180, 255, 0.35);
      --vm-pick: rgba(120, 180, 255, 0.18);
      --vm-pickBorder: rgba(120, 180, 255, 0.55);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--vm-ink);
    }

    #vocab-match .vm-wrap {
      background: radial-gradient(900px 500px at 10% 0%, rgba(243,234,217,0.08), transparent 55%),
                  radial-gradient(800px 500px at 90% 10%, rgba(225,204,170,0.06), transparent 60%),
                  var(--vm-bg);
      border: 1px solid var(--vm-border2);
      border-radius: 24px;
      padding: 18px 16px 14px;
      box-shadow: var(--vm-shadow);
      overflow: hidden;
    }

    #vocab-match .vm-head { padding: 6px 6px 12px; }

    #vocab-match .vm-title {
      margin: 0 0 6px;
      font-size: clamp(18px, 2.1vw, 24px);
      letter-spacing: 0.2px;
    }

    #vocab-match .vm-subtitle {
      margin: 0 0 12px;
      color: var(--vm-muted);
      line-height: 1.35;
      max-width: 80ch;
      font-size: 14px;
    }

    #vocab-match .vm-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      margin-bottom: 10px;
    }

    #vocab-match .vm-btn {
      background: rgba(243,234,217,0.06);
      color: var(--vm-ink);
      border: 1px solid var(--vm-border);
      border-radius: 999px;
      padding: 8px 12px;
      font-size: 13px;
      cursor: pointer;
      transition: transform 120ms ease, background 120ms ease, border-color 120ms ease;
      user-select: none;
    }
    #vocab-match .vm-btn:hover { background: rgba(243,234,217,0.10); transform: translateY(-1px); }
    #vocab-match .vm-btn:active { transform: translateY(0px); }
    #vocab-match .vm-btn:focus-visible { outline: none; box-shadow: 0 0 0 3px var(--vm-focus); }
    #vocab-match .vm-btn-primary { background: rgba(243,234,217,0.12); border-color: rgba(243,234,217,0.22); }

    #vocab-match .vm-status {
      min-height: 20px;
      color: var(--vm-muted);
      font-size: 13px;
      padding: 2px 2px 0;
    }

    #vocab-match .vm-board {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      padding: 8px 6px 10px;
    }

    #vocab-match .vm-col {
      background: linear-gradient(180deg, rgba(243,234,217,0.05), rgba(243,234,217,0.02));
      border: 1px solid var(--vm-border2);
      border-radius: var(--vm-radius);
      padding: 12px;
      min-height: 260px;
    }

    #vocab-match .vm-colhead {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 10px;
    }

    #vocab-match .vm-coltitle { font-weight: 700; letter-spacing: 0.2px; font-size: 14px; }

    #vocab-match .vm-colhint {
      color: var(--vm-faint);
      font-size: 12px;
      line-height: 1.25;
      text-align: right;
      max-width: 44ch;
    }

    #vocab-match .vm-list {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      gap: 10px;
    }

    #vocab-match .vm-item {
      background: var(--vm-card);
      border: 1px solid var(--vm-border2);
      border-radius: var(--vm-radius2);
      padding: 10px 10px;
      display: grid;
      gap: 6px;
      transition: background 120ms ease, border-color 120ms ease, transform 120ms ease;
    }

    #vocab-match .vm-item[data-kind="term"] {
      background: linear-gradient(180deg, rgba(243,234,217,0.06), rgba(243,234,217,0.03)), var(--vm-card2);
      cursor: grab;
    }

    #vocab-match .vm-item[data-kind="term"]:active { cursor: grabbing; }
    #vocab-match .vm-item.vm-dragging { opacity: 0.55; transform: scale(0.99); }

    #vocab-match .vm-item[data-kind="def"].vm-dropzone {
      outline: 2px dashed rgba(243,234,217,0.25);
      outline-offset: 2px;
    }
    #vocab-match .vm-item[data-kind="def"].vm-over {
      outline-color: rgba(120,180,255,0.65);
      background: rgba(120,180,255,0.10);
    }

    #vocab-match .vm-item.vm-selected {
      border-color: var(--vm-pickBorder);
      background: linear-gradient(180deg, var(--vm-pick), rgba(0,0,0,0)), var(--vm-card);
    }

    #vocab-match .vm-item:focus-visible {
      outline: none;
      box-shadow: 0 0 0 3px var(--vm-focus);
    }

    #vocab-match .vm-rowtop {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    #vocab-match .vm-term {
      font-weight: 800;
      letter-spacing: 0.2px;
      font-size: 14px;
    }

    #vocab-match .vm-tag {
      font-size: 12px;
      color: rgba(15,18,22,0.92);
      background: rgba(243,234,217,0.90);
      border-radius: 999px;
      padding: 2px 8px;
      flex: 0 0 auto;
      letter-spacing: 0.4px;
      font-weight: 800;
    }

    #vocab-match .vm-deftext {
      color: var(--vm-muted);
      font-size: 13px;
      line-height: 1.25;
    }

    #vocab-match .vm-example {
      color: rgba(243,234,217,0.78);
      font-size: 12.5px;
      line-height: 1.25;
      border-left: 2px solid rgba(243,234,217,0.18);
      padding-left: 8px;
      margin-top: 2px;
    }

    #vocab-match .vm-assign {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-top: 4px;
      padding-top: 6px;
      border-top: 1px solid rgba(243,234,217,0.10);
      color: var(--vm-faint);
      font-size: 12px;
    }

    #vocab-match .vm-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(243,234,217,0.06);
      border: 1px solid rgba(243,234,217,0.12);
      border-radius: 999px;
      padding: 4px 10px;
      max-width: 100%;
      flex: 1 1 auto;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }
    #vocab-match .vm-pill strong { color: rgba(243,234,217,0.92); font-weight: 800; }

    #vocab-match .vm-clear {
      border: 1px solid rgba(243,234,217,0.16);
      background: transparent;
      color: var(--vm-ink);
      border-radius: 999px;
      padding: 3px 8px;
      font-size: 12px;
      cursor: pointer;
      flex: 0 0 auto;
    }
    #vocab-match .vm-clear:hover { background: rgba(243,234,217,0.08); }
    #vocab-match .vm-clear:focus-visible { outline: none; box-shadow: 0 0 0 3px var(--vm-focus); }

    #vocab-match .vm-inputrow {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-top: 6px;
      padding-top: 6px;
      border-top: 1px solid rgba(243,234,217,0.10);
    }

    #vocab-match input.vm-code {
      width: 56px;
      padding: 6px 8px;
      background: rgba(0,0,0,0.25);
      border: 1px solid rgba(243,234,217,0.18);
      color: var(--vm-ink);
      border-radius: 10px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.6px;
      font-size: 13px;
    }
    #vocab-match input.vm-code:focus-visible {
      outline: none;
      box-shadow: 0 0 0 3px var(--vm-focus);
      border-color: rgba(120,180,255,0.55);
    }

    #vocab-match .vm-codehint {
      color: var(--vm-faint);
      font-size: 12px;
      line-height: 1.25;
      flex: 1 1 auto;
    }

    #vocab-match .vm-item.vm-correct {
      background: linear-gradient(180deg, var(--vm-good), rgba(0,0,0,0)), var(--vm-card);
      border-color: rgba(78, 210, 146, 0.35);
    }
    #vocab-match .vm-item.vm-wrong {
      background: linear-gradient(180deg, var(--vm-bad), rgba(0,0,0,0)), var(--vm-card);
      border-color: rgba(255, 110, 110, 0.30);
    }

    #vocab-match .vm-footer { padding: 0 6px 2px; }

    #vocab-match .vm-help {
      background: rgba(243,234,217,0.04);
      border: 1px solid rgba(243,234,217,0.10);
      border-radius: var(--vm-radius);
      padding: 10px 12px;
      color: var(--vm-muted);
      font-size: 13px;
    }
    #vocab-match .vm-help summary {
      cursor: pointer;
      font-weight: 800;
      color: var(--vm-ink);
      margin-bottom: 6px;
      outline: none;
    }
    #vocab-match .vm-help ul {
      margin: 8px 0 0;
      padding-left: 18px;
      display: grid;
      gap: 6px;
    }

    @media (max-width: 880px) {
      #vocab-match .vm-board { grid-template-columns: 1fr; }
      #vocab-match .vm-colhint { text-align: left; }
    }
  </style>

  <script>
    (() => {
      const root = document.querySelector("#vocab-match");
      if (!root) return;

      const termsEl = root.querySelector("#vmTerms");
      const defsEl = root.querySelector("#vmDefs");
      const statusEl = root.querySelector(".vm-status");

      const DATA = [
        {
          id: "contr",
          term: "Sonidos contrastivos",
          def: "Sonidos que, si se sustituyen por otros, pueden cambiar el significado de una palabra (funcionan como contraste en el sistema).",
          ex: "Ej.: si “pan” y “van” se distinguen por un sonido, ese contraste cuenta en esa variedad."
        },
        {
          id: "dial",
          term: "Dialecto",
          def: "Variedad de una lengua asociada a una comunidad; no es “incorrecta”, solo diferente.",
          ex: "Ej.: español caribeño, mexicano y peninsular: comparten mucho, pero varían en pronunciación y vocabulario."
        },
        {
          id: "std",
          term: "Variedad estándar",
          def: "Forma de hablar con prestigio social e institucional (escuela, diccionarios, gramáticas) que suele presentarse como la norma.",
          ex: "Ej.: una forma “estándar” puede evitar rasgos estigmatizados aunque sean sistemáticos en un dialecto."
        },
        {
          id: "fonet",
          term: "Fonética",
          def: "Estudio de cómo se producen y se perciben los sonidos del habla (y rasgos como ritmo/entonación).",
          ex: "Ej.: describir si una /s/ final suena como [s], [h] o se pierde en cierto contexto."
        },
        {
          id: "fonol",
          term: "Fonología",
          def: "Estudio de cómo se organizan los sonidos en el sistema de una lengua y cómo crean contrastes de significado.",
          ex: "Ej.: demostrar que dos sonidos son fonemas distintos usando pares mínimos."
        },
        {
          id: "idiom",
          term: "Idioma",
          def: "Lengua de un pueblo o nación (o común a varios), usada por una comunidad amplia.",
          ex: "Ej.: español, inglés y portugués son idiomas con múltiples variedades."
        },
        {
          id: "lengua",
          term: "Lengua",
          def: "Sistema de comunicación verbal propio de una comunidad; una realización concreta del lenguaje humano.",
          ex: "Ej.: el español es una lengua; dentro de ella hay dialectos/variedades."
        },
        {
          id: "lenguaj",
          term: "Lenguaje",
          def: "Capacidad humana general de comunicarse y expresar pensamiento mediante sistemas de signos.",
          ex: "Ej.: una persona tiene lenguaje; aprende una lengua específica (español, inglés, etc.)."
        },
        {
          id: "minpar",
          term: "Par mínimo",
          def: "Dos palabras que se diferencian en un solo sonido y tienen significados distintos; sirve para probar contraste.",
          ex: "Ej.: “pero” vs “perro” (cambia un sonido y cambia el significado)."
        },
        {
          id: "prej",
          term: "Prejuicio lingüístico",
          def: "Juicios o actitudes negativas hacia una manera de hablar que reflejan prejuicios sociales, no inferioridad lingüística.",
          ex: "Ej.: decir que un dialecto “no tiene gramática” por no coincidir con el estándar."
        }
      ];

      const LETTERS = "ABCDEFGHIJ".split("");

      const state = {
        orderTerms: [],
        orderDefs: [],
        mapping: new Map(), // termId -> defId
        selected: null       // { kind: "term"|"def", id: string }
      };

      function shuffle(arr) {
        const a = arr.slice();
        for (let i = a.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }

      function setStatus(msg) {
        statusEl.textContent = msg || "";
      }

      function clearFeedback() {
        root.querySelectorAll(".vm-item").forEach(el => {
          el.classList.remove("vm-correct", "vm-wrong");
        });
      }

      function clearSelection() {
        state.selected = null;
        root.querySelectorAll(".vm-item.vm-selected").forEach(el => el.classList.remove("vm-selected"));
      }

      function getLetterForDef(defId) {
        const idx = state.orderDefs.indexOf(defId);
        return idx >= 0 ? LETTERS[idx] : "";
      }

      function getDefByLetter(letter) {
        const idx = LETTERS.indexOf(letter);
        if (idx < 0) return null;
        return state.orderDefs[idx] || null;
      }

      function disconnect(termId) {
        state.mapping.delete(termId);
        const input = root.querySelector(`.vm-item[data-kind="term"][data-term-id="${termId}"] input.vm-code`);
        if (input) input.value = "";
      }

      function connect(termId, defId, announce = true) {
        // enforce one-to-one: remove any term previously mapped to this def
        for (const [tId, dId] of state.mapping.entries()) {
          if (dId === defId) state.mapping.delete(tId);
        }
        state.mapping.set(termId, defId);

        // sync letter input
        const letter = getLetterForDef(defId);
        const input = root.querySelector(`.vm-item[data-kind="term"][data-term-id="${termId}"] input.vm-code`);
        if (input) input.value = letter;

        if (announce) {
          const tObj = DATA.find(x => x.id === termId);
          setStatus(`Conectado: “${tObj ? tObj.term : termId}” → ${letter}.`);
        }
      }

      function render() {
        clearFeedback();
        clearSelection();

        // Terms
        termsEl.innerHTML = "";
        state.orderTerms.forEach((id, idx) => {
          const item = DATA.find(x => x.id === id);

          const li = document.createElement("li");
          li.className = "vm-item";
          li.dataset.kind = "term";
          li.dataset.termId = item.id;
          li.setAttribute("tabindex", "0");
          li.setAttribute("draggable", "true");
          li.setAttribute("role", "button");
          li.setAttribute("aria-label", `Término: ${item.term}. Haz clic para seleccionar.`);

          const top = document.createElement("div");
          top.className = "vm-rowtop";

          const term = document.createElement("div");
          term.className = "vm-term";
          term.textContent = item.term;

          const badge = document.createElement("span");
          badge.className = "vm-tag";
          badge.textContent = String(idx + 1);

          top.appendChild(term);
          top.appendChild(badge);
          li.appendChild(top);

          // Assignment pill + clear
          const defId = state.mapping.get(item.id);
          const assign = document.createElement("div");
          assign.className = "vm-assign";

          const pill = document.createElement("span");
          pill.className = "vm-pill";
          if (defId) {
            const letter = getLetterForDef(defId) || "—";
            pill.innerHTML = `Asignado a: <strong>${letter}</strong>`;
          } else {
            pill.innerHTML = `Asignado a: <strong>—</strong>`;
          }

          const clearBtn = document.createElement("button");
          clearBtn.className = "vm-clear";
          clearBtn.type = "button";
          clearBtn.textContent = "Quitar";
          clearBtn.setAttribute("aria-label", `Quitar conexión de ${item.term}`);
          clearBtn.disabled = !defId;
          clearBtn.addEventListener("click", (ev) => {
            ev.stopPropagation();
            disconnect(item.id);
            render();
            setStatus("Conexión quitada.");
          });

          assign.appendChild(pill);
          assign.appendChild(clearBtn);
          li.appendChild(assign);

          // Letter input (always visible)
          const row = document.createElement("div");
          row.className = "vm-inputrow";

          const hint = document.createElement("div");
          hint.className = "vm-codehint";
          hint.textContent = "Letra (A–J):";

          const input = document.createElement("input");
          input.className = "vm-code";
          input.type = "text";
          input.maxLength = 1;
          input.inputMode = "text";
          input.autocomplete = "off";
          input.spellcheck = false;
          input.setAttribute("aria-label", `Letra para ${item.term} (A a J)`);

          const existing = state.mapping.get(item.id);
          input.value = existing ? (getLetterForDef(existing) || "") : "";

          input.addEventListener("click", (ev) => ev.stopPropagation());
          input.addEventListener("input", () => {
            const v = (input.value || "").toUpperCase().replace(/[^A-J]/g, "");
            input.value = v;

            if (!v) {
              disconnect(item.id);
              render();
              setStatus("Letra borrada: conexión eliminada.");
              return;
            }
            const defFromLetter = getDefByLetter(v);
            if (!defFromLetter) return;
            connect(item.id, defFromLetter, false);
            render();
            setStatus(`Conectado por letra: “${item.term}” → ${v}.`);
          });

          row.appendChild(hint);
          row.appendChild(input);
          li.appendChild(row);

          termsEl.appendChild(li);
        });

        // Definitions
        defsEl.innerHTML = "";
        state.orderDefs.forEach((id, idx) => {
          const item = DATA.find(x => x.id === id);

          const li = document.createElement("li");
          li.className = "vm-item vm-dropzone";
          li.dataset.kind = "def";
          li.dataset.defId = item.id;
          li.setAttribute("tabindex", "0");
          li.setAttribute("role", "button");
          li.setAttribute("aria-label", `Definición ${LETTERS[idx]}. Haz clic para seleccionar.`);

          const top = document.createElement("div");
          top.className = "vm-rowtop";

          const title = document.createElement("div");
          title.className = "vm-term";
          title.textContent = "Definición";

          const letter = document.createElement("span");
          letter.className = "vm-tag";
          letter.textContent = LETTERS[idx];

          top.appendChild(title);
          top.appendChild(letter);

          const def = document.createElement("div");
          def.className = "vm-deftext";
          def.textContent = item.def;

          const ex = document.createElement("div");
          ex.className = "vm-example";
          ex.textContent = item.ex;

          li.appendChild(top);
          li.appendChild(def);
          li.appendChild(ex);

          defsEl.appendChild(li);
        });
      }

      function initOrders() {
        const ids = DATA.map(x => x.id);
        state.orderTerms = shuffle(ids);
        state.orderDefs = shuffle(ids);
      }

      function checkAnswers() {
        clearFeedback();

        let correct = 0;

        // Term cards: correct if mapped to itself (id==id)
        state.orderTerms.forEach((termId) => {
          const termEl = root.querySelector(`.vm-item[data-kind="term"][data-term-id="${termId}"]`);
          const assigned = state.mapping.get(termId);

          if (assigned && assigned === termId) {
            correct++;
            termEl && termEl.classList.add("vm-correct");
          } else {
            termEl && termEl.classList.add("vm-wrong");
          }
        });

        // Def cards: correct if the matching term maps to it
        state.orderDefs.forEach((defId) => {
          const defEl = root.querySelector(`.vm-item[data-kind="def"][data-def-id="${defId}"]`);
          let mappedTerm = null;
          for (const [tId, dId] of state.mapping.entries()) {
            if (dId === defId) { mappedTerm = tId; break; }
          }
          if (mappedTerm && mappedTerm === defId) defEl && defEl.classList.add("vm-correct");
          else defEl && defEl.classList.add("vm-wrong");
        });

        setStatus(`Resultado: ${correct}/${DATA.length} correctas.`);
      }

      function resetGame() {
        state.mapping.clear();
        clearFeedback();
        clearSelection();
        render();
        setStatus("Reiniciado.");
      }

      function shuffleAll() {
        initOrders();
        state.mapping.clear();
        clearFeedback();
        clearSelection();
        render();
        setStatus("Mezclado.");
      }

      function toggleSelect(kind, id) {
        const selector = kind === "term"
          ? `.vm-item[data-kind="term"][data-term-id="${id}"]`
          : `.vm-item[data-kind="def"][data-def-id="${id}"]`;

        const el = root.querySelector(selector);
        if (!el) return;

        // If selecting the same again -> clear
        if (state.selected && state.selected.kind === kind && state.selected.id === id) {
          clearSelection();
          setStatus("Selección cancelada.");
          return;
        }

        clearSelection();
        state.selected = { kind, id };
        el.classList.add("vm-selected");
        setStatus(kind === "term"
          ? "Término seleccionado. Ahora haz clic en una definición."
          : "Definición seleccionada. Ahora haz clic en un término."
        );
      }

      function clickConnect(kind, id) {
        if (!state.selected) {
          toggleSelect(kind, id);
          return;
        }

        // If second click same kind -> switch selection
        if (state.selected.kind === kind) {
          toggleSelect(kind, id);
          return;
        }

        // Connect: term + def
        const termId = (kind === "term") ? id : state.selected.id;
        const defId  = (kind === "def")  ? id : state.selected.id;

        connect(termId, defId, true);
        clearSelection();
        render();
      }

      // Drag handlers
      function attachDragHandlers() {
        // drag start on terms
        termsEl.addEventListener("dragstart", (e) => {
          const li = e.target.closest(".vm-item[data-kind='term']");
          if (!li) return;
          const termId = li.dataset.termId;
          li.classList.add("vm-dragging");
          e.dataTransfer.setData("text/vm-term-id", termId);
          e.dataTransfer.effectAllowed = "move";
        });
        termsEl.addEventListener("dragend", (e) => {
          const li = e.target.closest(".vm-item[data-kind='term']");
          if (!li) return;
          li.classList.remove("vm-dragging");
        });

        // allow drop on defs
        defsEl.addEventListener("dragenter", (e) => {
          const li = e.target.closest(".vm-item[data-kind='def']");
          if (!li) return;
          e.preventDefault();
          li.classList.add("vm-over");
        });
        defsEl.addEventListener("dragover", (e) => {
          const li = e.target.closest(".vm-item[data-kind='def']");
          if (!li) return;
          e.preventDefault();
          li.classList.add("vm-over");
          e.dataTransfer.dropEffect = "move";
        });
        defsEl.addEventListener("dragleave", (e) => {
          const li = e.target.closest(".vm-item[data-kind='def']");
          if (!li) return;
          li.classList.remove("vm-over");
        });
        defsEl.addEventListener("drop", (e) => {
          const li = e.target.closest(".vm-item[data-kind='def']");
          if (!li) return;
          e.preventDefault();
          li.classList.remove("vm-over");

          const termId = e.dataTransfer.getData("text/vm-term-id");
          const defId = li.dataset.defId;
          if (!termId || !defId) return;

          connect(termId, defId, true);
          render();
        });
      }

      // Click handlers (clic→clic)
      function attachClickHandlers() {
        root.addEventListener("click", (e) => {
          const btn = e.target.closest("button.vm-btn");
          if (btn) {
            const action = btn.getAttribute("data-action");
            if (action === "check") checkAnswers();
            if (action === "reset") resetGame();
            if (action === "shuffle") shuffleAll();
            return;
          }

          const termCard = e.target.closest(".vm-item[data-kind='term']");
          if (termCard) {
            clickConnect("term", termCard.dataset.termId);
            return;
          }

          const defCard = e.target.closest(".vm-item[data-kind='def']");
          if (defCard) {
            clickConnect("def", defCard.dataset.defId);
            return;
          }
        });

        // Keyboard support: Enter/Space selects/connects
        root.addEventListener("keydown", (e) => {
          const isActivate = (e.key === "Enter" || e.key === " ");
          if (!isActivate) return;

          const termCard = e.target.closest(".vm-item[data-kind='term']");
          const defCard = e.target.closest(".vm-item[data-kind='def']");
          if (!termCard && !defCard) return;

          e.preventDefault();
          if (termCard) clickConnect("term", termCard.dataset.termId);
          if (defCard) clickConnect("def", defCard.dataset.defId);
        });
      }

      // Init
      initOrders();
      render();
      attachDragHandlers();
      attachClickHandlers();
      setStatus("Conecta arrastrando, clic→clic, o escribiendo letras (A–J).");
    })();
  </script>
</section>


          










          <section id="min-pairs-game">
  <div class="mp-wrap" role="region" aria-label="Juego: identificar pares mínimos">
    <header class="mp-head">
      <h2 class="mp-title">¿Par mínimo o no?</h2>
      <p class="mp-subtitle">
        Para cada par, decide si es <strong>par mínimo</strong> o <strong>no</strong>.
        Recuerda: no te fijes solo en la ortografía y ten en cuenta la variación dialectal.
      </p>

      <div class="mp-topbar" role="group" aria-label="Controles">
        <div class="mp-select">
          <label class="mp-label" for="mpDialect">Variedad:</label>
          <select id="mpDialect" class="mp-dropdown" aria-label="Seleccionar variedad">
            <option value="spain">España (distinción /s/ vs /θ/)</option>
            <option value="latam">América Latina (seseo)</option>
          </select>
          <span class="mp-note">*Esto afecta especialmente <strong>vos – voz</strong>.</span>
        </div>

        <div class="mp-actions">
          <button class="mp-btn" data-action="shuffle" aria-label="Mezclar">Mezclar</button>
          <button class="mp-btn mp-btn-primary" data-action="check" aria-label="Comprobar">Comprobar</button>
          <button class="mp-btn" data-action="reset" aria-label="Reiniciar">Reiniciar</button>
        </div>
      </div>

      <div class="mp-status" aria-live="polite"></div>
    </header>

    <div class="mp-grid">
      <div class="mp-game" aria-label="Preguntas del juego">
        <div class="mp-progress" aria-label="Progreso">
          <div class="mp-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
            <div class="mp-barfill"></div>
          </div>
          <div class="mp-scoreline">
            <span class="mp-pill" id="mpAnswered">Respondidas: <strong>0</strong>/5</span>
            <span class="mp-pill" id="mpScore">Correctas: <strong>0</strong>/5</span>
          </div>
        </div>

        <div class="mp-list" id="mpList"></div>
      </div>

      <aside class="mp-rubric" aria-label="Rúbrica: condiciones para identificar un par mínimo">
        <h3 class="mp-rtitle">Condiciones para identificar un par mínimo</h3>
        <ul class="mp-rlist">
          <li>Hay un cambio de significado o palabra.</li>
          <li>Hay el mismo número de sonidos.</li>
          <li>Solo cambia un sonido.</li>
          <li>El sonido que cambia está en la misma posición.</li>
        </ul>
        <hr class="mp-hr" />
        <ul class="mp-rlist">
          <li>No te fijes en la escritura.</li>
          <li>Ten en cuenta la variación dialectal.</li>
        </ul>

        <details class="mp-tip">
          <summary>Tip rápido</summary>
          <p>
            Si en tu variedad suenan igual (homófonos), <strong>no</strong> es par mínimo, aunque se escriban distinto.
          </p>
        </details>
      </aside>
    </div>
  </div>

  <style>
    /* ===== Scoped CSS: #min-pairs-game ===== */
    #min-pairs-game{
      --bg:#0f1216;
      --panel:#151a21;
      --card:#121821;
      --card2:#10161f;
      --ink:#f3ead9;
      --muted:rgba(243,234,217,.74);
      --faint:rgba(243,234,217,.55);
      --border:rgba(243,234,217,.16);
      --border2:rgba(243,234,217,.10);
      --shadow:0 12px 30px rgba(0,0,0,.35);
      --r:18px;
      --r2:14px;
      --good:rgba(78,210,146,.22);
      --bad:rgba(255,110,110,.18);
      --focus:rgba(120,180,255,.35);
      --pick:rgba(120,180,255,.14);
      --pickB:rgba(120,180,255,.55);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--ink);
    }

    #min-pairs-game .mp-wrap{
      background:
        radial-gradient(900px 500px at 10% 0%, rgba(243,234,217,0.08), transparent 55%),
        radial-gradient(800px 500px at 90% 10%, rgba(225,204,170,0.06), transparent 60%),
        var(--bg);
      border:1px solid var(--border2);
      border-radius:24px;
      padding:18px 16px 14px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    #min-pairs-game .mp-head{padding:6px 6px 12px;}
    #min-pairs-game .mp-title{margin:0 0 6px;font-size:clamp(18px,2.1vw,24px);letter-spacing:.2px;}
    #min-pairs-game .mp-subtitle{margin:0 0 12px;color:var(--muted);line-height:1.35;max-width:88ch;font-size:14px;}

    #min-pairs-game .mp-topbar{
      display:flex;
      gap:12px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
      margin-bottom:10px;
    }

    #min-pairs-game .mp-select{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      background:rgba(243,234,217,0.04);
      border:1px solid rgba(243,234,217,0.10);
      border-radius:999px;
      padding:8px 10px;
    }
    #min-pairs-game .mp-label{font-size:13px;color:var(--muted);font-weight:800;letter-spacing:.2px;}
    #min-pairs-game .mp-dropdown{
      background:rgba(0,0,0,0.25);
      border:1px solid rgba(243,234,217,0.18);
      color:var(--ink);
      border-radius:999px;
      padding:6px 10px;
      font-weight:700;
      font-size:13px;
    }
    #min-pairs-game .mp-dropdown:focus-visible{outline:none;box-shadow:0 0 0 3px var(--focus);border-color:rgba(120,180,255,.55);}
    #min-pairs-game .mp-note{font-size:12px;color:var(--faint);}

    #min-pairs-game .mp-actions{display:flex;gap:10px;flex-wrap:wrap;align-items:center;}
    #min-pairs-game .mp-btn{
      background:rgba(243,234,217,0.06);
      color:var(--ink);
      border:1px solid var(--border);
      border-radius:999px;
      padding:8px 12px;
      font-size:13px;
      cursor:pointer;
      transition:transform 120ms ease, background 120ms ease, border-color 120ms ease;
      user-select:none;
    }
    #min-pairs-game .mp-btn:hover{background:rgba(243,234,217,0.10);transform:translateY(-1px);}
    #min-pairs-game .mp-btn:active{transform:translateY(0px);}
    #min-pairs-game .mp-btn:focus-visible{outline:none;box-shadow:0 0 0 3px var(--focus);}
    #min-pairs-game .mp-btn-primary{background:rgba(243,234,217,0.12);border-color:rgba(243,234,217,0.22);}

    #min-pairs-game .mp-status{min-height:20px;color:var(--muted);font-size:13px;padding:2px 2px 0;}

    #min-pairs-game .mp-grid{
      display:grid;
      grid-template-columns: 1.25fr .85fr;
      gap:14px;
      padding:8px 6px 10px;
      align-items:start;
    }

    #min-pairs-game .mp-game,
    #min-pairs-game .mp-rubric{
      background:linear-gradient(180deg, rgba(243,234,217,0.05), rgba(243,234,217,0.02));
      border:1px solid var(--border2);
      border-radius:var(--r);
      padding:12px;
      min-height:260px;
    }

    #min-pairs-game .mp-progress{
      display:grid;
      gap:10px;
      margin-bottom:12px;
    }

    #min-pairs-game .mp-bar{
      height:10px;
      background:rgba(243,234,217,0.08);
      border:1px solid rgba(243,234,217,0.10);
      border-radius:999px;
      overflow:hidden;
    }
    #min-pairs-game .mp-barfill{
      height:100%;
      width:0%;
      background:rgba(243,234,217,0.55);
      border-radius:999px;
      transition:width 180ms ease;
    }
    #min-pairs-game .mp-scoreline{display:flex;gap:10px;flex-wrap:wrap;}
    #min-pairs-game .mp-pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      background:rgba(243,234,217,0.06);
      border:1px solid rgba(243,234,217,0.12);
      border-radius:999px;
      padding:6px 10px;
      font-size:12px;
      color:var(--faint);
    }
    #min-pairs-game .mp-pill strong{color:rgba(243,234,217,.92);}

    #min-pairs-game .mp-list{display:grid;gap:10px;}

    #min-pairs-game .mp-card{
      background:var(--card);
      border:1px solid var(--border2);
      border-radius:var(--r2);
      padding:10px;
      display:grid;
      gap:10px;
    }

    #min-pairs-game .mp-card.mp-correct{
      background:linear-gradient(180deg, var(--good), rgba(0,0,0,0)), var(--card);
      border-color:rgba(78,210,146,.35);
    }
    #min-pairs-game .mp-card.mp-wrong{
      background:linear-gradient(180deg, var(--bad), rgba(0,0,0,0)), var(--card);
      border-color:rgba(255,110,110,.30);
    }

    #min-pairs-game .mp-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }

    #min-pairs-game .mp-num{
      font-size:12px;
      color:rgba(15,18,22,.92);
      background:rgba(243,234,217,.90);
      border-radius:999px;
      padding:2px 8px;
      font-weight:900;
      letter-spacing:.4px;
    }

    #min-pairs-game .mp-pair{
      font-size:16px;
      font-weight:900;
      letter-spacing:.2px;
    }

    #min-pairs-game .mp-choices{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    #min-pairs-game .mp-choice{
      border:1px solid rgba(243,234,217,0.18);
      background:rgba(243,234,217,0.06);
      color:var(--ink);
      border-radius:999px;
      padding:8px 12px;
      font-size:13px;
      cursor:pointer;
      transition:transform 120ms ease, background 120ms ease, border-color 120ms ease;
      user-select:none;
      font-weight:800;
    }
    #min-pairs-game .mp-choice:hover{background:rgba(243,234,217,0.10);transform:translateY(-1px);}
    #min-pairs-game .mp-choice:active{transform:translateY(0px);}
    #min-pairs-game .mp-choice:focus-visible{outline:none;box-shadow:0 0 0 3px var(--focus);}

    #min-pairs-game .mp-choice.mp-selected{
      border-color:var(--pickB);
      background:linear-gradient(180deg, var(--pick), rgba(0,0,0,0)), rgba(243,234,217,0.06);
    }

    #min-pairs-game .mp-small{
      color:var(--muted);
      font-size:13px;
      line-height:1.25;
    }

    #min-pairs-game .mp-expl{
      border-top:1px solid rgba(243,234,217,0.10);
      padding-top:10px;
      display:none;
      gap:6px;
    }
    #min-pairs-game .mp-expl.show{display:grid;}

    #min-pairs-game .mp-expl .mp-tag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      background:rgba(243,234,217,0.06);
      border:1px solid rgba(243,234,217,0.12);
      border-radius:999px;
      padding:4px 10px;
      font-size:12px;
      color:var(--faint);
      width:max-content;
    }
    #min-pairs-game .mp-expl .mp-tag strong{color:rgba(243,234,217,.92);}

    #min-pairs-game .mp-rtitle{margin:0 0 10px;font-size:14px;font-weight:900;letter-spacing:.2px;}
    #min-pairs-game .mp-rlist{margin:0 0 10px;padding-left:18px;color:var(--muted);display:grid;gap:6px;}
    #min-pairs-game .mp-hr{border:none;border-top:1px solid rgba(243,234,217,0.10);margin:10px 0;}

    #min-pairs-game .mp-tip{
      margin-top:10px;
      background:rgba(243,234,217,0.04);
      border:1px solid rgba(243,234,217,0.10);
      border-radius:var(--r);
      padding:10px 12px;
      color:var(--muted);
      font-size:13px;
    }
    #min-pairs-game .mp-tip summary{
      cursor:pointer;
      font-weight:900;
      color:var(--ink);
      margin-bottom:6px;
      outline:none;
    }

    @media (max-width: 980px){
      #min-pairs-game .mp-grid{grid-template-columns:1fr;}
    }
  </style>

  <script>
    (() => {
      const root = document.querySelector("#min-pairs-game");
      if (!root) return;

      const listEl = root.querySelector("#mpList");
      const statusEl = root.querySelector(".mp-status");
      const dialectEl = root.querySelector("#mpDialect");
      const answeredEl = root.querySelector("#mpAnswered strong");
      const scoreEl = root.querySelector("#mpScore strong");
      const bar = root.querySelector(".mp-bar");
      const barFill = root.querySelector(".mp-barfill");

      const DATA = [
        {
          id: "gama-cama",
          pair: "gama – cama",
          correct: { spain: true, latam: true },
          explain: {
            spain: "Sí, es un par mínimo — [g] y [k] son alófonos de fonemas distintos, /g/ y /k/.",
            latam: "Sí, es un par mínimo — [g] y [k] son alófonos de fonemas distintos, /g/ y /k/."
          }
        },
        {
          id: "vos-voz",
          pair: "vos – voz",
          correct: { spain: true, latam: false },
          explain: {
            spain: "Es un par mínimo en España — [s] y [θ] son alófonos de fonemas distintos, /s/ y /θ/.",
            latam: "No es un par mínimo en América Latina — son homófonos."
          }
        },
        {
          id: "jugar-lugar",
          pair: "jugar – lugar",
          correct: { spain: true, latam: true },
          explain: {
            spain: "Sí es un par mínimo — [x] y [l] son alófonos de fonemas distintos, /x/ y /l/.",
            latam: "Sí es un par mínimo — [x] y [l] son alófonos de fonemas distintos, /x/ y /l/."
          }
        },
        {
          id: "hola-ola",
          pair: "hola – ola",
          correct: { spain: false, latam: false },
          explain: {
            spain: "No, no es un par mínimo — son homófonos.",
            latam: "No, no es un par mínimo — son homófonos."
          }
        },
        {
          id: "un-gato-un-loro",
          pair: "un gato – un loro",
          correct: { spain: false, latam: false },
          explain: {
            spain: "No, no es un par mínimo — [ŋ] y [n] son alófonos de un solo fonema, /n/.",
            latam: "No, no es un par mínimo — [ŋ] y [n] son alófonos de un solo fonema, /n/."
          }
        }
      ];

      let order = [];
      const answers = new Map(); // id -> true/false

      function setStatus(msg){ statusEl.textContent = msg || ""; }

      function shuffle(arr){
        const a = arr.slice();
        for (let i = a.length - 1; i > 0; i--){
          const j = Math.floor(Math.random() * (i + 1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }

      function currentDialect(){
        return dialectEl.value === "latam" ? "latam" : "spain";
      }

      function updateProgress(){
        const total = DATA.length;
        const answered = Array.from(answers.values()).filter(v => typeof v === "boolean").length;
        answeredEl.textContent = String(answered);

        // score (only if checked? we'll show live correctness based on current dialect but only for answered)
        let correct = 0;
        const d = currentDialect();
        for (const item of DATA){
          const a = answers.get(item.id);
          if (typeof a === "boolean"){
            if (a === item.correct[d]) correct++;
          }
        }
        scoreEl.textContent = String(correct);

        const pct = Math.round((answered / total) * 100);
        bar.setAttribute("aria-valuenow", String(pct));
        barFill.style.width = pct + "%";
      }

      function cardTemplate(item, idx){
        const wrap = document.createElement("div");
        wrap.className = "mp-card";
        wrap.dataset.id = item.id;

        const top = document.createElement("div");
        top.className = "mp-row";

        const left = document.createElement("div");
        left.style.display = "flex";
        left.style.alignItems = "center";
        left.style.gap = "10px";

        const num = document.createElement("span");
        num.className = "mp-num";
        num.textContent = String(idx + 1);

        const pair = document.createElement("div");
        pair.className = "mp-pair";
        pair.textContent = item.pair;

        left.appendChild(num);
        left.appendChild(pair);

        const choices = document.createElement("div");
        choices.className = "mp-choices";

        const yes = document.createElement("button");
        yes.type = "button";
        yes.className = "mp-choice";
        yes.dataset.choice = "yes";
        yes.setAttribute("aria-label", `Marcar ${item.pair} como par mínimo`);
        yes.textContent = "Par mínimo";

        const no = document.createElement("button");
        no.type = "button";
        no.className = "mp-choice";
        no.dataset.choice = "no";
        no.setAttribute("aria-label", `Marcar ${item.pair} como no par mínimo`);
        no.textContent = "No par mínimo";

        choices.appendChild(yes);
        choices.appendChild(no);

        top.appendChild(left);
        top.appendChild(choices);

        const small = document.createElement("div");
        small.className = "mp-small";
        small.innerHTML = `Tu respuesta: <strong class="mp-your">—</strong>`;

        const expl = document.createElement("div");
        expl.className = "mp-expl";
        expl.innerHTML = `
          <span class="mp-tag">Correcta: <strong class="mp-correct">—</strong></span>
          <div class="mp-small mp-reason"></div>
        `;

        wrap.appendChild(top);
        wrap.appendChild(small);
        wrap.appendChild(expl);

        return wrap;
      }

      function render(){
        listEl.innerHTML = "";
        const items = order.map(id => DATA.find(x => x.id === id));

        items.forEach((item, idx) => {
          const card = cardTemplate(item, idx);

          // restore selection
          const a = answers.get(item.id);
          if (typeof a === "boolean"){
            const your = card.querySelector(".mp-your");
            your.textContent = a ? "Par mínimo" : "No par mínimo";
            const btnYes = card.querySelector('[data-choice="yes"]');
            const btnNo = card.querySelector('[data-choice="no"]');
            (a ? btnYes : btnNo).classList.add("mp-selected");
          }

          listEl.appendChild(card);
        });

        updateProgress();
      }

      function markCardResult(card, isCorrect, correctLabel, reason){
        card.classList.remove("mp-correct", "mp-wrong");
        card.classList.add(isCorrect ? "mp-correct" : "mp-wrong");

        const expl = card.querySelector(".mp-expl");
        expl.classList.add("show");

        card.querySelector(".mp-correct").textContent = correctLabel;
        card.querySelector(".mp-reason").textContent = reason;
      }

      function checkAll(){
        const d = currentDialect();
        let correct = 0;
        let answered = 0;

        root.querySelectorAll(".mp-card").forEach(card => {
          const id = card.dataset.id;
          const item = DATA.find(x => x.id === id);
          const a = answers.get(id);

          const correctBool = item.correct[d];
          const correctLabel = correctBool ? "Par mínimo" : "No par mínimo";
          const reason = item.explain[d];

          if (typeof a === "boolean") answered++;

          const ok = (typeof a === "boolean") && (a === correctBool);
          if (ok) correct++;

          markCardResult(card, ok, correctLabel, reason);
        });

        setStatus(`Resultado: ${correct}/${DATA.length} correctas. (${answered} respondidas)`);
        updateProgress();
      }

      function resetAll(){
        answers.clear();
        setStatus("Reiniciado.");
        render();
      }

      function shuffleAll(){
        order = shuffle(DATA.map(x => x.id));
        answers.clear();
        setStatus("Mezclado.");
        render();
      }

      // Handle answer clicks
      root.addEventListener("click", (e) => {
        const actionBtn = e.target.closest("button[data-action]");
        if (actionBtn){
          const a = actionBtn.getAttribute("data-action");
          if (a === "check") checkAll();
          if (a === "reset") resetAll();
          if (a === "shuffle") shuffleAll();
          return;
        }

        const choiceBtn = e.target.closest(".mp-choice");
        if (!choiceBtn) return;

        const card = choiceBtn.closest(".mp-card");
        if (!card) return;
        const id = card.dataset.id;

        const choice = choiceBtn.dataset.choice;
        const val = choice === "yes";

        answers.set(id, val);

        // UI selection
        card.querySelectorAll(".mp-choice").forEach(b => b.classList.remove("mp-selected"));
        choiceBtn.classList.add("mp-selected");
        card.querySelector(".mp-your").textContent = val ? "Par mínimo" : "No par mínimo";

        // If card already showed explanation, refresh it with current dialect correctness
        const expl = card.querySelector(".mp-expl");
        if (expl.classList.contains("show")){
          const d = currentDialect();
          const item = DATA.find(x => x.id === id);
          const correctBool = item.correct[d];
          const correctLabel = correctBool ? "Par mínimo" : "No par mínimo";
          const reason = item.explain[d];
          markCardResult(card, val === correctBool, correctLabel, reason);
        }

        updateProgress();
      });

      // Dialect change: if explanations are visible, update them; score/progress update always
      dialectEl.addEventListener("change", () => {
        const d = currentDialect();
        root.querySelectorAll(".mp-card").forEach(card => {
          const expl = card.querySelector(".mp-expl");
          if (!expl.classList.contains("show")) return;

          const id = card.dataset.id;
          const item = DATA.find(x => x.id === id);
          const a = answers.get(id);

          const correctBool = item.correct[d];
          const correctLabel = correctBool ? "Par mínimo" : "No par mínimo";
          const reason = item.explain[d];

          const ok = (typeof a === "boolean") && (a === correctBool);
          markCardResult(card, ok, correctLabel, reason);
        });

        setStatus(d === "spain"
          ? "Variedad: España. (Distinción /s/ vs /θ/)."
          : "Variedad: América Latina. (Seseo)."
        );

        updateProgress();
      });

      // Init
      order = DATA.map(x => x.id);
      render();
      setStatus("Responde y luego presiona “Comprobar”.");
    })();
  </script>
</section>










  <section id="contrastive-sounds">
  <div class="cs-wrap" role="region" aria-label="Juego: sonidos contrastivos">
    <header class="cs-head">
      <h2 class="cs-title">¿Sonidos contrastivos o no?</h2>
      <p class="cs-subtitle">
        Decide si los sonidos a continuación son <strong>contrastivos</strong> o <strong>no</strong> en alguna variedad
        del español. Si quieres, escribe una explicación breve. Luego presiona <strong>Comprobar</strong>.
      </p>

      <div class="cs-topbar" role="group" aria-label="Controles">
        <button class="cs-btn" data-action="shuffle" aria-label="Mezclar">Mezclar</button>
        <button class="cs-btn cs-btn-primary" data-action="check" aria-label="Comprobar">Comprobar</button>
        <button class="cs-btn" data-action="reset" aria-label="Reiniciar">Reiniciar</button>
      </div>

      <div class="cs-status" aria-live="polite"></div>
    </header>

    <div class="cs-grid">
      <div class="cs-game" aria-label="Ejercicio">
        <div class="cs-progress" aria-label="Progreso">
          <div class="cs-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
            <div class="cs-barfill"></div>
          </div>
          <div class="cs-scoreline">
            <span class="cs-pill" id="csAnswered">Respondidas: <strong>0</strong>/5</span>
            <span class="cs-pill" id="csScore">Correctas: <strong>0</strong>/5</span>
          </div>
        </div>

        <div class="cs-list" id="csList"></div>
      </div>

      <aside class="cs-rubric" aria-label="Guía rápida">
        <h3 class="cs-rtitle">Guía rápida</h3>
        <ul class="cs-rlist">
          <li><strong>Contrastivos</strong> si cambian significado (puedes formar un par mínimo).</li>
          <li><strong>No contrastivos</strong> si son alófonos del mismo fonema (suena “acento”, pero no cambia significado).</li>
          <li>Ojo: <strong>posición</strong> importa (p. ej., entre vocales vs inicio de palabra).</li>
        </ul>
        <details class="cs-tip">
          <summary>Tip</summary>
          <p>
            Un par puede ser contrastivo solo en un contexto específico (por ejemplo, <strong>[r] vs [ɾ]</strong>
            entre vocales).
          </p>
        </details>
      </aside>
    </div>
  </div>

  <style>
    /* ===== Scoped CSS: #contrastive-sounds ===== */
    #contrastive-sounds{
      --bg:#0f1216;
      --card:#121821;
      --card2:#10161f;
      --ink:#f3ead9;
      --muted:rgba(243,234,217,.74);
      --faint:rgba(243,234,217,.55);
      --border:rgba(243,234,217,.16);
      --border2:rgba(243,234,217,.10);
      --shadow:0 12px 30px rgba(0,0,0,.35);
      --r:18px;
      --r2:14px;
      --good:rgba(78,210,146,.22);
      --bad:rgba(255,110,110,.18);
      --focus:rgba(120,180,255,.35);
      --pick:rgba(120,180,255,.14);
      --pickB:rgba(120,180,255,.55);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--ink);
    }

    #contrastive-sounds .cs-wrap{
      background:
        radial-gradient(900px 500px at 10% 0%, rgba(243,234,217,0.08), transparent 55%),
        radial-gradient(800px 500px at 90% 10%, rgba(225,204,170,0.06), transparent 60%),
        var(--bg);
      border:1px solid var(--border2);
      border-radius:24px;
      padding:18px 16px 14px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    #contrastive-sounds .cs-head{padding:6px 6px 12px;}
    #contrastive-sounds .cs-title{margin:0 0 6px;font-size:clamp(18px,2.1vw,24px);letter-spacing:.2px;}
    #contrastive-sounds .cs-subtitle{margin:0 0 12px;color:var(--muted);line-height:1.35;max-width:92ch;font-size:14px;}

    #contrastive-sounds .cs-topbar{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      margin-bottom:10px;
    }

    #contrastive-sounds .cs-btn{
      background:rgba(243,234,217,0.06);
      color:var(--ink);
      border:1px solid var(--border);
      border-radius:999px;
      padding:8px 12px;
      font-size:13px;
      cursor:pointer;
      transition:transform 120ms ease, background 120ms ease, border-color 120ms ease;
      user-select:none;
    }
    #contrastive-sounds .cs-btn:hover{background:rgba(243,234,217,0.10);transform:translateY(-1px);}
    #contrastive-sounds .cs-btn:active{transform:translateY(0px);}
    #contrastive-sounds .cs-btn:focus-visible{outline:none;box-shadow:0 0 0 3px var(--focus);}
    #contrastive-sounds .cs-btn-primary{background:rgba(243,234,217,0.12);border-color:rgba(243,234,217,0.22);}

    #contrastive-sounds .cs-status{min-height:20px;color:var(--muted);font-size:13px;padding:2px 2px 0;}

    #contrastive-sounds .cs-grid{
      display:grid;
      grid-template-columns: 1.25fr .85fr;
      gap:14px;
      padding:8px 6px 10px;
      align-items:start;
    }

    #contrastive-sounds .cs-game,
    #contrastive-sounds .cs-rubric{
      background:linear-gradient(180deg, rgba(243,234,217,0.05), rgba(243,234,217,0.02));
      border:1px solid var(--border2);
      border-radius:var(--r);
      padding:12px;
      min-height:260px;
    }

    #contrastive-sounds .cs-progress{display:grid;gap:10px;margin-bottom:12px;}
    #contrastive-sounds .cs-bar{
      height:10px;
      background:rgba(243,234,217,0.08);
      border:1px solid rgba(243,234,217,0.10);
      border-radius:999px;
      overflow:hidden;
    }
    #contrastive-sounds .cs-barfill{
      height:100%;
      width:0%;
      background:rgba(243,234,217,0.55);
      border-radius:999px;
      transition:width 180ms ease;
    }
    #contrastive-sounds .cs-scoreline{display:flex;gap:10px;flex-wrap:wrap;}
    #contrastive-sounds .cs-pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      background:rgba(243,234,217,0.06);
      border:1px solid rgba(243,234,217,0.12);
      border-radius:999px;
      padding:6px 10px;
      font-size:12px;
      color:var(--faint);
    }
    #contrastive-sounds .cs-pill strong{color:rgba(243,234,217,.92);}

    #contrastive-sounds .cs-list{display:grid;gap:10px;}

    #contrastive-sounds .cs-card{
      background:var(--card);
      border:1px solid var(--border2);
      border-radius:var(--r2);
      padding:10px;
      display:grid;
      gap:10px;
    }
    #contrastive-sounds .cs-card.cs-correct{
      background:linear-gradient(180deg, var(--good), rgba(0,0,0,0)), var(--card);
      border-color:rgba(78,210,146,.35);
    }
    #contrastive-sounds .cs-card.cs-wrong{
      background:linear-gradient(180deg, var(--bad), rgba(0,0,0,0)), var(--card);
      border-color:rgba(255,110,110,.30);
    }

    #contrastive-sounds .cs-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }

    #contrastive-sounds .cs-num{
      font-size:12px;
      color:rgba(15,18,22,.92);
      background:rgba(243,234,217,.90);
      border-radius:999px;
      padding:2px 8px;
      font-weight:900;
      letter-spacing:.4px;
    }

    #contrastive-sounds .cs-pair{
      font-size:18px;
      font-weight:900;
      letter-spacing:.2px;
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }

    #contrastive-sounds .cs-context{
      font-size:12px;
      color:rgba(15,18,22,.92);
      background:rgba(243,234,217,.88);
      border-radius:999px;
      padding:2px 8px;
      font-weight:900;
      letter-spacing:.3px;
      opacity:.95;
    }

    #contrastive-sounds .cs-choices{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    #contrastive-sounds .cs-choice{
      border:1px solid rgba(243,234,217,0.18);
      background:rgba(243,234,217,0.06);
      color:var(--ink);
      border-radius:999px;
      padding:8px 12px;
      font-size:13px;
      cursor:pointer;
      transition:transform 120ms ease, background 120ms ease, border-color 120ms ease;
      user-select:none;
      font-weight:900;
    }
    #contrastive-sounds .cs-choice:hover{background:rgba(243,234,217,0.10);transform:translateY(-1px);}
    #contrastive-sounds .cs-choice:active{transform:translateY(0px);}
    #contrastive-sounds .cs-choice:focus-visible{outline:none;box-shadow:0 0 0 3px var(--focus);}
    #contrastive-sounds .cs-choice.cs-selected{
      border-color:var(--pickB);
      background:linear-gradient(180deg, var(--pick), rgba(0,0,0,0)), rgba(243,234,217,0.06);
    }

    #contrastive-sounds .cs-explain{
      display:grid;
      gap:8px;
    }
    #contrastive-sounds .cs-label{
      font-size:12px;
      color:var(--faint);
      font-weight:800;
      letter-spacing:.2px;
    }
    #contrastive-sounds textarea.cs-text{
      width:100%;
      min-height:56px;
      resize:vertical;
      background:rgba(0,0,0,0.25);
      border:1px solid rgba(243,234,217,0.18);
      color:var(--ink);
      border-radius:12px;
      padding:10px 10px;
      font-size:13px;
      line-height:1.3;
    }
    #contrastive-sounds textarea.cs-text:focus-visible{
      outline:none;
      box-shadow:0 0 0 3px var(--focus);
      border-color:rgba(120,180,255,.55);
    }

    #contrastive-sounds .cs-feedback{
      border-top:1px solid rgba(243,234,217,0.10);
      padding-top:10px;
      display:none;
      gap:8px;
    }
    #contrastive-sounds .cs-feedback.show{display:grid;}

    #contrastive-sounds .cs-tag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      background:rgba(243,234,217,0.06);
      border:1px solid rgba(243,234,217,0.12);
      border-radius:999px;
      padding:4px 10px;
      font-size:12px;
      color:var(--faint);
      width:max-content;
    }
    #contrastive-sounds .cs-tag strong{color:rgba(243,234,217,.92);}
    #contrastive-sounds .cs-small{color:var(--muted);font-size:13px;line-height:1.25;}

    #contrastive-sounds .cs-rtitle{margin:0 0 10px;font-size:14px;font-weight:900;letter-spacing:.2px;}
    #contrastive-sounds .cs-rlist{margin:0 0 10px;padding-left:18px;color:var(--muted);display:grid;gap:6px;}
    #contrastive-sounds .cs-tip{
      margin-top:10px;
      background:rgba(243,234,217,0.04);
      border:1px solid rgba(243,234,217,0.10);
      border-radius:var(--r);
      padding:10px 12px;
      color:var(--muted);
      font-size:13px;
    }
    #contrastive-sounds .cs-tip summary{
      cursor:pointer;
      font-weight:900;
      color:var(--ink);
      margin-bottom:6px;
      outline:none;
    }

    @media (max-width: 980px){
      #contrastive-sounds .cs-grid{grid-template-columns:1fr;}
    }
  </style>

  <script>
    (() => {
      const root = document.querySelector("#contrastive-sounds");
      if (!root) return;

      const listEl = root.querySelector("#csList");
      const statusEl = root.querySelector(".cs-status");
      const answeredEl = root.querySelector("#csAnswered strong");
      const scoreEl = root.querySelector("#csScore strong");
      const bar = root.querySelector(".cs-bar");
      const barFill = root.querySelector(".cs-barfill");

      // Clave (basada en tu screenshot)
      const DATA = [
        {
          id: "t_d",
          pair: "[t̪] – [d̪]",
          context: "",
          correct: true,
          key: "Son contrastivos. Por ejemplo, un par mínimo es “tan” (so) y “dan” (they give)."
        },
        {
          id: "d_dh",
          pair: "[d̪] – [ð]",
          context: "",
          correct: false,
          key: "No son contrastivos. Son alófonos de un solo fonema, /d/. Si pronunciara “dedo” con [de.do] en lugar de [de.ðo], tendría un acento pero no crearía un significado diferente."
        },
        {
          id: "s_z",
          pair: "[s] – [z]",
          context: "",
          correct: false,
          key: "No son contrastivos. Son alófonos de un solo fonema, /s/. Si pronunciara “mismo” como [mis.mo] en vez de [miz.mo], tendría un acento pero no crearía un significado diferente."
        },
        {
          id: "r_tap_trill",
          pair: "[r] – [ɾ]",
          context: "entre vocales",
          correct: true,
          key: "Son contrastivos entre vocales. Por ejemplo, un par mínimo es “caro” (expensive) y “carro” (car)."
        },
        {
          id: "r_tap_trill_edges",
          pair: "[r] – [ɾ]",
          context: "inicio/final de palabra",
          correct: false,
          key: "No son contrastivos al inicio de una palabra o al final de una palabra. La regla es usar [r] al principio de las palabras, pero [ɾ] no cambiaría el significado."
        }
      ];

      let order = [];
      const answers = new Map(); // id -> boolean

      function setStatus(msg){ statusEl.textContent = msg || ""; }

      function shuffle(arr){
        const a = arr.slice();
        for (let i = a.length - 1; i > 0; i--){
          const j = Math.floor(Math.random() * (i + 1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }

      function updateProgress(){
        const total = DATA.length;
        let answered = 0;
        let correct = 0;

        for (const it of DATA){
          const a = answers.get(it.id);
          if (typeof a === "boolean"){
            answered++;
            if (a === it.correct) correct++;
          }
        }

        answeredEl.textContent = String(answered);
        scoreEl.textContent = String(correct);

        const pct = Math.round((answered / total) * 100);
        bar.setAttribute("aria-valuenow", String(pct));
        barFill.style.width = pct + "%";
      }

      function cardTemplate(item, idx){
        const card = document.createElement("div");
        card.className = "cs-card";
        card.dataset.id = item.id;

        const top = document.createElement("div");
        top.className = "cs-row";

        const left = document.createElement("div");
        left.style.display = "flex";
        left.style.alignItems = "center";
        left.style.gap = "10px";

        const num = document.createElement("span");
        num.className = "cs-num";
        num.textContent = String(idx + 1);

        const pair = document.createElement("div");
        pair.className = "cs-pair";
        pair.textContent = item.pair;

        if (item.context){
          const cx = document.createElement("span");
          cx.className = "cs-context";
          cx.textContent = item.context;
          pair.appendChild(cx);
        }

        left.appendChild(num);
        left.appendChild(pair);

        const choices = document.createElement("div");
        choices.className = "cs-choices";

        const yes = document.createElement("button");
        yes.type = "button";
        yes.className = "cs-choice";
        yes.dataset.choice = "yes";
        yes.setAttribute("aria-label", `Marcar ${item.pair} como contrastivos`);
        yes.textContent = "Contrastivos";

        const no = document.createElement("button");
        no.type = "button";
        no.className = "cs-choice";
        no.dataset.choice = "no";
        no.setAttribute("aria-label", `Marcar ${item.pair} como no contrastivos`);
        no.textContent = "No contrastivos";

        choices.appendChild(yes);
        choices.appendChild(no);

        top.appendChild(left);
        top.appendChild(choices);

        const explain = document.createElement("div");
        explain.className = "cs-explain";
        explain.innerHTML = `
          <div class="cs-label">Explica (opcional):</div>
          <textarea class="cs-text" placeholder="Escribe cómo llegaste a tu respuesta..."></textarea>
        `;

        const fb = document.createElement("div");
        fb.className = "cs-feedback";
        fb.innerHTML = `
          <span class="cs-tag">Correcta: <strong class="cs-correct">—</strong></span>
          <div class="cs-small cs-key"></div>
        `;

        card.appendChild(top);
        card.appendChild(explain);
        card.appendChild(fb);

        return card;
      }

      function render(){
        listEl.innerHTML = "";
        const items = order.map(id => DATA.find(x => x.id === id));

        items.forEach((item, idx) => {
          const card = cardTemplate(item, idx);

          // restore answer selection
          const a = answers.get(item.id);
          if (typeof a === "boolean"){
            const btn = card.querySelector(a ? '[data-choice="yes"]' : '[data-choice="no"]');
            btn && btn.classList.add("cs-selected");
          }

          listEl.appendChild(card);
        });

        updateProgress();
      }

      function showResult(card, isCorrect, correctBool, keyText){
        card.classList.remove("cs-correct", "cs-wrong");
        card.classList.add(isCorrect ? "cs-correct" : "cs-wrong");

        const fb = card.querySelector(".cs-feedback");
        fb.classList.add("show");

        card.querySelector(".cs-correct").textContent = correctBool ? "Contrastivos" : "No contrastivos";
        card.querySelector(".cs-key").textContent = keyText;
      }

      function checkAll(){
        let answered = 0;
        let correct = 0;

        root.querySelectorAll(".cs-card").forEach(card => {
          const id = card.dataset.id;
          const item = DATA.find(x => x.id === id);
          const a = answers.get(id);

          const ok = (typeof a === "boolean") && (a === item.correct);
          if (typeof a === "boolean") answered++;
          if (ok) correct++;

          showResult(card, ok, item.correct, item.key);
        });

        setStatus(`Resultado: ${correct}/${DATA.length} correctas. (${answered} respondidas)`);
        updateProgress();
      }

      function resetAll(){
        answers.clear();
        setStatus("Reiniciado.");
        render();
      }

      function shuffleAll(){
        order = shuffle(DATA.map(x => x.id));
        answers.clear();
        setStatus("Mezclado.");
        render();
      }

      // Click handlers
      root.addEventListener("click", (e) => {
        const actionBtn = e.target.closest("button[data-action]");
        if (actionBtn){
          const a = actionBtn.getAttribute("data-action");
          if (a === "check") checkAll();
          if (a === "reset") resetAll();
          if (a === "shuffle") shuffleAll();
          return;
        }

        const btn = e.target.closest(".cs-choice");
        if (!btn) return;

        const card = btn.closest(".cs-card");
        if (!card) return;

        const id = card.dataset.id;
        const val = btn.dataset.choice === "yes";

        answers.set(id, val);

        card.querySelectorAll(".cs-choice").forEach(b => b.classList.remove("cs-selected"));
        btn.classList.add("cs-selected");

        // If feedback already visible, update it live
        const fb = card.querySelector(".cs-feedback");
        if (fb.classList.contains("show")){
          const item = DATA.find(x => x.id === id);
          const ok = val === item.correct;
          showResult(card, ok, item.correct, item.key);
        }

        updateProgress();
      });

      // Init
      order = DATA.map(x => x.id);
      render();
      setStatus("Responde y luego presiona “Comprobar”.");
    })();
  </script>
</section>
        




          





<section id="phoneme-compare">
  <div class="pc-wrap" role="region" aria-label="Actividad: compara tu respuesta">
    <header class="pc-head">
      <h2 class="pc-title">Pregunta de discusión: el fonema</h2>
      <p class="pc-subtitle">
        Responde con tus propias palabras. Luego abre “Comparar con una posible respuesta” para ver un modelo y
        contrastar ideas (no es para “copiar”, es para comparar).
      </p>
    </header>

    <div class="pc-grid">
      <!-- LEFT: Student response -->
      <div class="pc-card" aria-label="Tu respuesta">
        <div class="pc-cardhead">
          <span class="pc-badge">Tu respuesta</span>
          <span class="pc-hint">Escribe primero. Después compara.</span>
        </div>

        <div class="pc-prompt" aria-label="Pregunta">
          <div class="pc-qtitle">Ejercicio 3: pregunta de discusión</div>
          <div class="pc-qtext">
            El fonema es una propuesta teórica sobre la organización de los sonidos en una lengua.
            En tus propias palabras, indica <strong>qué es un fonema</strong> y <strong>qué aspectos de la organización
            de los sonidos pretende explicar</strong>.
          </div>
        </div>

        <label class="pc-label" for="pcAnswer">Escribe aquí:</label>
        <textarea
          id="pcAnswer"
          class="pc-textarea"
          placeholder="Define ‘fonema’ y explica qué ayuda a entender sobre la organización de los sonidos..."
        ></textarea>

        <div class="pc-actions" role="group" aria-label="Acciones">
          <button class="pc-btn" data-action="save" aria-label="Guardar en este navegador">Guardar</button>
          <button class="pc-btn" data-action="clear" aria-label="Borrar tu respuesta">Borrar</button>
          <button class="pc-btn pc-btn-primary" data-action="toggle" aria-label="Comparar con una posible respuesta">
            Comparar con una posible respuesta
          </button>
        </div>

        <div class="pc-status" aria-live="polite"></div>
      </div>

      <!-- RIGHT: Model answer (hidden until toggle) -->
      <aside class="pc-card pc-model" aria-label="Posible respuesta para comparar" aria-hidden="true">
        <div class="pc-cardhead">
          <span class="pc-badge">Posible respuesta</span>
          <span class="pc-hint">Úsala para comparar, no para memorizar.</span>
        </div>

        <div class="pc-modelblock">
          <div class="pc-mtitle">¿Qué es un fonema?</div>
          <ul class="pc-list">
            <li><strong>Fonema</strong> = categoría abstracta (<strong>//</strong>). Es decir, una “idea” de un sonido.</li>
            <li>Es <strong>contrastivo</strong>: puede cambiar el significado de una palabra.</li>
            <li>Se realiza como sonidos físicos (<strong>alófonos</strong>) <strong>[ ]</strong>.</li>
            <li>Puede agrupar pronunciaciones distintas bajo “la misma” categoría.</li>
          </ul>

          <div class="pc-mtitle">¿Qué explica sobre la organización de los sonidos?</div>
          <ul class="pc-list">
            <li>
              <strong>Contraste</strong>: qué sonidos distinguen palabras.
              <div class="pc-ex">Ej.: español /ɾ/ vs /r/ (<em>pera</em> vs <em>perra</em>).</div>
            </li>
            <li>
              <strong>Agrupación</strong>: un fonema → varios alófonos.
              <div class="pc-ex">Ej.: inglés /t/ → [tʰ], [t], [ɾ].</div>
            </li>
            <li>
              <strong>Distribución</strong>: cada alófono aparece en contextos típicos.
              <div class="pc-ex">Ej.: [tʰ] inicio; [t] después de /s/; [ɾ] entre vocales.</div>
            </li>
          </ul>
        </div>

        <div class="pc-compare">
          <div class="pc-mtitle">Mini-check de comparación</div>
          <ul class="pc-list pc-check">
            <li>¿Mencionaste que el fonema es <strong>abstracto</strong> (//) y el alófono es <strong>físico</strong> ([ ])?</li>
            <li>¿Incluiste <strong>contraste</strong> (cambio de significado) con un ejemplo?</li>
            <li>¿Incluiste <strong>agrupación</strong> (un fonema → varios alófonos) y <strong>distribución</strong> (contextos)?</li>
          </ul>
        </div>
      </aside>
    </div>
  </div>

  <style>
    /* ===== Scoped CSS: #phoneme-compare ===== */
    #phoneme-compare{
      --bg:#0f1216;
      --card:#121821;
      --card2:#10161f;
      --ink:#f3ead9;
      --muted:rgba(243,234,217,.74);
      --faint:rgba(243,234,217,.55);
      --border:rgba(243,234,217,.16);
      --border2:rgba(243,234,217,.10);
      --shadow:0 12px 30px rgba(0,0,0,.35);
      --r:18px;
      --r2:14px;
      --focus:rgba(120,180,255,.35);
      --accent:rgba(243,234,217,.92);
      --blue:rgba(120,180,255,.14);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--ink);
    }

    #phoneme-compare .pc-wrap{
      background:
        radial-gradient(900px 500px at 10% 0%, rgba(243,234,217,0.08), transparent 55%),
        radial-gradient(800px 500px at 90% 10%, rgba(225,204,170,0.06), transparent 60%),
        var(--bg);
      border:1px solid var(--border2);
      border-radius:24px;
      padding:18px 16px 14px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    #phoneme-compare .pc-head{padding:6px 6px 12px;}
    #phoneme-compare .pc-title{margin:0 0 6px;font-size:clamp(18px,2.1vw,24px);letter-spacing:.2px;}
    #phoneme-compare .pc-subtitle{margin:0;color:var(--muted);line-height:1.35;max-width:95ch;font-size:14px;}

    #phoneme-compare .pc-grid{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:14px;
      padding:12px 6px 10px;
      align-items:start;
    }

    #phoneme-compare .pc-card{
      background:linear-gradient(180deg, rgba(243,234,217,0.05), rgba(243,234,217,0.02));
      border:1px solid var(--border2);
      border-radius:var(--r);
      padding:12px;
      min-height:260px;
    }

    #phoneme-compare .pc-cardhead{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
      flex-wrap:wrap;
    }

    #phoneme-compare .pc-badge{
      font-size:12px;
      color:rgba(15,18,22,.92);
      background:rgba(243,234,217,.90);
      border-radius:999px;
      padding:2px 8px;
      font-weight:900;
      letter-spacing:.4px;
    }

    #phoneme-compare .pc-hint{color:var(--faint);font-size:12px;line-height:1.25;}

    #phoneme-compare .pc-prompt{
      background:linear-gradient(180deg, rgba(120,180,255,0.12), rgba(0,0,0,0));
      border:1px solid rgba(120,180,255,0.22);
      border-radius:var(--r2);
      padding:10px;
      margin-bottom:10px;
    }

    #phoneme-compare .pc-qtitle{
      font-weight:900;
      letter-spacing:.2px;
      margin-bottom:6px;
      font-size:13px;
      color:rgba(243,234,217,.92);
    }

    #phoneme-compare .pc-qtext{
      color:var(--muted);
      font-size:13px;
      line-height:1.35;
    }

    #phoneme-compare .pc-label{
      display:block;
      margin:10px 0 6px;
      font-size:12px;
      color:var(--faint);
      font-weight:900;
      letter-spacing:.2px;
    }

    #phoneme-compare .pc-textarea{
      width:100%;
      min-height:170px;
      resize:vertical;
      background:rgba(0,0,0,0.25);
      border:1px solid rgba(243,234,217,0.18);
      color:var(--ink);
      border-radius:12px;
      padding:10px 10px;
      font-size:13px;
      line-height:1.35;
    }

    #phoneme-compare .pc-textarea:focus-visible{
      outline:none;
      box-shadow:0 0 0 3px var(--focus);
      border-color:rgba(120,180,255,.55);
    }

    #phoneme-compare .pc-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:10px;
    }

    #phoneme-compare .pc-btn{
      background:rgba(243,234,217,0.06);
      color:var(--ink);
      border:1px solid var(--border);
      border-radius:999px;
      padding:8px 12px;
      font-size:13px;
      cursor:pointer;
      transition:transform 120ms ease, background 120ms ease, border-color 120ms ease;
      user-select:none;
      font-weight:800;
    }
    #phoneme-compare .pc-btn:hover{background:rgba(243,234,217,0.10);transform:translateY(-1px);}
    #phoneme-compare .pc-btn:active{transform:translateY(0px);}
    #phoneme-compare .pc-btn:focus-visible{outline:none;box-shadow:0 0 0 3px var(--focus);}
    #phoneme-compare .pc-btn-primary{background:rgba(243,234,217,0.12);border-color:rgba(243,234,217,0.22);}

    #phoneme-compare .pc-status{
      min-height:18px;
      margin-top:8px;
      color:var(--muted);
      font-size:13px;
    }

    #phoneme-compare .pc-model{
      display:none;
    }
    #phoneme-compare .pc-model.pc-show{
      display:block;
    }

    #phoneme-compare .pc-modelblock{
      background:rgba(243,234,217,0.04);
      border:1px solid rgba(243,234,217,0.10);
      border-radius:var(--r2);
      padding:10px;
    }

    #phoneme-compare .pc-mtitle{
      font-weight:900;
      letter-spacing:.2px;
      margin:0 0 8px;
      font-size:13px;
      color:rgba(243,234,217,.92);
    }

    #phoneme-compare .pc-list{
      margin:0 0 12px;
      padding-left:18px;
      color:var(--muted);
      display:grid;
      gap:6px;
      font-size:13px;
      line-height:1.3;
    }

    #phoneme-compare .pc-ex{
      margin-top:4px;
      padding-left:10px;
      border-left:2px solid rgba(243,234,217,0.18);
      color:rgba(243,234,217,0.78);
      font-size:12.5px;
      line-height:1.25;
    }

    #phoneme-compare .pc-compare{
      margin-top:10px;
      background:linear-gradient(180deg, rgba(120,180,255,0.10), rgba(0,0,0,0));
      border:1px solid rgba(120,180,255,0.18);
      border-radius:var(--r2);
      padding:10px;
    }
    #phoneme-compare .pc-check{margin-bottom:0;}

    @media (max-width: 980px){
      #phoneme-compare .pc-grid{grid-template-columns:1fr;}
    }
  </style>

  <script>
    (() => {
      const root = document.querySelector("#phoneme-compare");
      if (!root) return;

      const ta = root.querySelector("#pcAnswer");
      const model = root.querySelector(".pc-model");
      const status = root.querySelector(".pc-status");

      const KEY = "spa225_phoneme_compare_answer_v1";

      function setStatus(msg){ status.textContent = msg || ""; }

      function showModel(show){
        if (show){
          model.classList.add("pc-show");
          model.setAttribute("aria-hidden", "false");
          setStatus("Comparación abierta: revisa la posible respuesta a la derecha (o abajo en móvil).");
        } else {
          model.classList.remove("pc-show");
          model.setAttribute("aria-hidden", "true");
          setStatus("Comparación cerrada.");
        }
      }

      // restore saved text (if any)
      try{
        const saved = localStorage.getItem(KEY);
        if (saved) ta.value = saved;
      } catch(_) {}

      root.addEventListener("click", (e) => {
        const btn = e.target.closest("button[data-action]");
        if (!btn) return;

        const action = btn.getAttribute("data-action");

        if (action === "toggle"){
          const isOpen = model.classList.contains("pc-show");
          showModel(!isOpen);
        }

        if (action === "save"){
          try{
            localStorage.setItem(KEY, ta.value || "");
            setStatus("Guardado en este navegador.");
          } catch(_) {
            setStatus("No se pudo guardar en este navegador.");
          }
        }

        if (action === "clear"){
          ta.value = "";
          try{ localStorage.removeItem(KEY); } catch(_) {}
          setStatus("Borrado.");
        }
      });

      // start closed
      showModel(false);
      setStatus("Escribe tu respuesta. Puedes guardarla y luego comparar.");
    })();
  </script>
</section>












          <section id="filter-phoneme-compare">
  <div class="fp-wrap" role="region" aria-label="Actividad: video + compara tu respuesta">
    <header class="fp-head">
      <h2 class="fp-title">Ejercicio 4: la fonología y la adquisición</h2>
      <p class="fp-subtitle">
        Mira el video (min. <strong>11:30–15:30</strong>) y responde:
        ¿cómo se relaciona la idea del “filtro” con la noción de <strong>fonema</strong>?
        Incluye una diferencia entre <strong>español</strong> e <strong>inglés</strong>.
        Luego compara con un modelo.
      </p>
    </header>

    <div class="fp-grid">
      <!-- LEFT: video + student response -->
      <div class="fp-card" aria-label="Video y tu respuesta">
        <div class="fp-cardhead">
          <span class="fp-badge">Video y respuesta</span>
          <span class="fp-hint">Primero mira y responde. Luego compara.</span>
        </div>

        <div class="fp-video" aria-label="Video de YouTube">
          <div class="fp-videoShell">
            <iframe
              width="560"
              height="315"
              src="https://www.youtube.com/embed/DK4NhmY5bK0?si=1GAyggJeVfAecvmZ&amp;start=690"
              title="YouTube video player"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              referrerpolicy="strict-origin-when-cross-origin"
              allowfullscreen
            ></iframe>
          </div>
          <div class="fp-vnote">
            Segmento sugerido: <strong>11:30–15:30</strong> (el video ya empieza en 11:30).
          </div>
        </div>

        <div class="fp-prompt" aria-label="Pregunta">
          <div class="fp-qtitle">Pregunta</div>
          <div class="fp-qtext">
            ¿De qué manera está relacionada la idea del “filtro” que describe la investigadora Patricia Kuhl con la noción
            del <strong>fonema</strong>? Explica tu respuesta e intenta pensar en una diferencia entre el <strong>español</strong>
            y el <strong>inglés</strong> que ilustre la misma idea.
          </div>
        </div>

        <label class="fp-label" for="fpAnswer">Tu respuesta (primero):</label>
        <textarea
          id="fpAnswer"
          class="fp-textarea"
          placeholder="Explica el ‘filtro’ + relación con fonema + ejemplo español vs inglés..."
        ></textarea>

        <div class="fp-actions" role="group" aria-label="Acciones">
          <button class="fp-btn" data-action="save" aria-label="Guardar en este navegador">Guardar</button>
          <button class="fp-btn" data-action="clear" aria-label="Borrar tu respuesta">Borrar</button>
          <button class="fp-btn fp-btn-primary" data-action="toggle" aria-label="Comparar con una posible respuesta">
            Comparar con una posible respuesta
          </button>
        </div>

        <div class="fp-status" aria-live="polite"></div>
      </div>

      <!-- RIGHT: model answer -->
      <aside class="fp-card fp-model" aria-label="Posible respuesta para comparar" aria-hidden="true">
        <div class="fp-cardhead">
          <span class="fp-badge">Posible respuesta</span>
          <span class="fp-hint">Úsala para comparar, no para memorizar.</span>
        </div>

        <div class="fp-modelblock">
          <div class="fp-mtitle">Idea central (filtro → fonemas)</div>
          <ul class="fp-list">
            <li>
              Antes de ~<strong>11 meses</strong>, un bebé puede distinguir muchos contrastes (incluso de lenguas que no oye).
            </li>
            <li>
              Al oír su lengua todos los días, el bebé se “<strong>sintoniza</strong>”: se vuelve más sensible a los
              <strong>contrastes relevantes</strong> de su lengua.
            </li>
            <li>
              Con el tiempo, aprende qué sonidos <strong>distinguen palabras</strong> (qué contrastes “importan”).
              Eso construye su <strong>sistema de fonemas</strong>.
            </li>
            <li>
              Los contrastes no relevantes se <strong>agrupan</strong> (como alófonos de un mismo fonema).
            </li>
          </ul>

          <div class="fp-mtitle">Ejemplo español vs inglés</div>
          <ul class="fp-list">
            <li>
              Un bebé puede distinguir <strong>[n]</strong> y <strong>[ŋ]</strong> al inicio.
            </li>
            <li>
              En <strong>español</strong>, normalmente <strong>no</strong> cambian significado → el bebé los agrupa bajo <strong>/n/</strong>.
            </li>
            <li>
              En <strong>inglés</strong>, sí pueden cambiar significado → se tratan como fonemas distintos <strong>/n/</strong> y <strong>/ŋ/</strong>.
            </li>
            <li>
              Ejemplo contrastivo en inglés: <strong>sin</strong> /sɪn/ vs <strong>sing</strong> /sɪŋ/.
            </li>
          </ul>
        </div>

        <div class="fp-compare">
          <div class="fp-mtitle">Mini-check de comparación</div>
          <ul class="fp-list fp-check">
            <li>¿Explicaste que el “filtro” = <strong>sensibilidad</strong> a contrastes de la lengua?</li>
            <li>¿Conectaste eso con <strong>fonemas</strong> (qué sonidos distinguen palabras)?</li>
            <li>¿Incluiste un ejemplo <strong>español vs inglés</strong> y explicaste por qué importa el contraste?</li>
          </ul>
        </div>
      </aside>
    </div>
  </div>

  <style>
    /* ===== Scoped CSS: #filter-phoneme-compare ===== */
    #filter-phoneme-compare{
      --bg:#0f1216;
      --ink:#f3ead9;
      --muted:rgba(243,234,217,.74);
      --faint:rgba(243,234,217,.55);
      --border:rgba(243,234,217,.16);
      --border2:rgba(243,234,217,.10);
      --shadow:0 12px 30px rgba(0,0,0,.35);
      --r:18px;
      --r2:14px;
      --focus:rgba(120,180,255,.35);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--ink);
    }

    #filter-phoneme-compare .fp-wrap{
      background:
        radial-gradient(900px 500px at 10% 0%, rgba(243,234,217,0.08), transparent 55%),
        radial-gradient(800px 500px at 90% 10%, rgba(225,204,170,0.06), transparent 60%),
        var(--bg);
      border:1px solid var(--border2);
      border-radius:24px;
      padding:18px 16px 14px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    #filter-phoneme-compare .fp-head{padding:6px 6px 12px;}
    #filter-phoneme-compare .fp-title{margin:0 0 6px;font-size:clamp(18px,2.1vw,24px);letter-spacing:.2px;}
    #filter-phoneme-compare .fp-subtitle{margin:0;color:var(--muted);line-height:1.35;max-width:98ch;font-size:14px;}

    #filter-phoneme-compare .fp-grid{
      display:grid;
      grid-template-columns: 1.25fr .85fr;
      gap:14px;
      padding:12px 6px 10px;
      align-items:start;
    }

    #filter-phoneme-compare .fp-card{
      background:linear-gradient(180deg, rgba(243,234,217,0.05), rgba(243,234,217,0.02));
      border:1px solid var(--border2);
      border-radius:var(--r);
      padding:12px;
      min-height:260px;
    }

    #filter-phoneme-compare .fp-cardhead{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
      flex-wrap:wrap;
    }

    #filter-phoneme-compare .fp-badge{
      font-size:12px;
      color:rgba(15,18,22,.92);
      background:rgba(243,234,217,.90);
      border-radius:999px;
      padding:2px 8px;
      font-weight:900;
      letter-spacing:.4px;
    }
    #filter-phoneme-compare .fp-hint{color:var(--faint);font-size:12px;line-height:1.25;}

    /* Responsive video */
    #filter-phoneme-compare .fp-video{
      margin-bottom:10px;
    }
    #filter-phoneme-compare .fp-videoShell{
      position:relative;
      width:100%;
      padding-top:56.25%;
      border-radius:var(--r2);
      overflow:hidden;
      border:1px solid rgba(243,234,217,0.12);
      background:rgba(0,0,0,0.25);
    }
    #filter-phoneme-compare .fp-videoShell iframe{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      border:0;
    }
    #filter-phoneme-compare .fp-vnote{
      margin-top:8px;
      color:var(--faint);
      font-size:12px;
    }

    #filter-phoneme-compare .fp-prompt{
      background:linear-gradient(180deg, rgba(120,180,255,0.12), rgba(0,0,0,0));
      border:1px solid rgba(120,180,255,0.22);
      border-radius:var(--r2);
      padding:10px;
      margin-bottom:10px;
    }
    #filter-phoneme-compare .fp-qtitle{
      font-weight:900;
      letter-spacing:.2px;
      margin-bottom:6px;
      font-size:13px;
      color:rgba(243,234,217,.92);
    }
    #filter-phoneme-compare .fp-qtext{
      color:var(--muted);
      font-size:13px;
      line-height:1.35;
    }

    #filter-phoneme-compare .fp-label{
      display:block;
      margin:10px 0 6px;
      font-size:12px;
      color:var(--faint);
      font-weight:900;
      letter-spacing:.2px;
    }

    #filter-phoneme-compare .fp-textarea{
      width:100%;
      min-height:170px;
      resize:vertical;
      background:rgba(0,0,0,0.25);
      border:1px solid rgba(243,234,217,0.18);
      color:var(--ink);
      border-radius:12px;
      padding:10px 10px;
      font-size:13px;
      line-height:1.35;
    }
    #filter-phoneme-compare .fp-textarea:focus-visible{
      outline:none;
      box-shadow:0 0 0 3px var(--focus);
      border-color:rgba(120,180,255,.55);
    }

    #filter-phoneme-compare .fp-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:10px;
    }

    #filter-phoneme-compare .fp-btn{
      background:rgba(243,234,217,0.06);
      color:var(--ink);
      border:1px solid var(--border);
      border-radius:999px;
      padding:8px 12px;
      font-size:13px;
      cursor:pointer;
      transition:transform 120ms ease, background 120ms ease, border-color 120ms ease;
      user-select:none;
      font-weight:800;
    }
    #filter-phoneme-compare .fp-btn:hover{background:rgba(243,234,217,0.10);transform:translateY(-1px);}
    #filter-phoneme-compare .fp-btn:active{transform:translateY(0px);}
    #filter-phoneme-compare .fp-btn:focus-visible{outline:none;box-shadow:0 0 0 3px var(--focus);}
    #filter-phoneme-compare .fp-btn-primary{background:rgba(243,234,217,0.12);border-color:rgba(243,234,217,0.22);}

    #filter-phoneme-compare .fp-status{
      min-height:18px;
      margin-top:8px;
      color:var(--muted);
      font-size:13px;
    }

    #filter-phoneme-compare .fp-model{display:none;}
    #filter-phoneme-compare .fp-model.fp-show{display:block;}

    #filter-phoneme-compare .fp-modelblock{
      background:rgba(243,234,217,0.04);
      border:1px solid rgba(243,234,217,0.10);
      border-radius:var(--r2);
      padding:10px;
    }

    #filter-phoneme-compare .fp-mtitle{
      font-weight:900;
      letter-spacing:.2px;
      margin:0 0 8px;
      font-size:13px;
      color:rgba(243,234,217,.92);
    }

    #filter-phoneme-compare .fp-list{
      margin:0 0 12px;
      padding-left:18px;
      color:var(--muted);
      display:grid;
      gap:6px;
      font-size:13px;
      line-height:1.3;
    }
    #filter-phoneme-compare .fp-check{margin-bottom:0;}

    #filter-phoneme-compare .fp-compare{
      margin-top:10px;
      background:linear-gradient(180deg, rgba(120,180,255,0.10), rgba(0,0,0,0));
      border:1px solid rgba(120,180,255,0.18);
      border-radius:var(--r2);
      padding:10px;
    }

    @media (max-width: 980px){
      #filter-phoneme-compare .fp-grid{grid-template-columns:1fr;}
    }
  </style>

  <script>
    (() => {
      const root = document.querySelector("#filter-phoneme-compare");
      if (!root) return;

      const ta = root.querySelector("#fpAnswer");
      const model = root.querySelector(".fp-model");
      const status = root.querySelector(".fp-status");

      const KEY = "spa225_filter_phoneme_compare_answer_v1";

      function setStatus(msg){ status.textContent = msg || ""; }

      function showModel(show){
        if (show){
          model.classList.add("fp-show");
          model.setAttribute("aria-hidden", "false");
          setStatus("Comparación abierta: revisa la posible respuesta a la derecha (o abajo en móvil).");
        } else {
          model.classList.remove("fp-show");
          model.setAttribute("aria-hidden", "true");
          setStatus("Comparación cerrada.");
        }
      }

      // restore saved (if any)
      try{
        const saved = localStorage.getItem(KEY);
        if (saved) ta.value = saved;
      } catch(_) {}

      root.addEventListener("click", (e) => {
        const btn = e.target.closest("button[data-action]");
        if (!btn) return;

        const action = btn.getAttribute("data-action");

        if (action === "toggle"){
          const isOpen = model.classList.contains("fp-show");
          showModel(!isOpen);
        }

        if (action === "save"){
          try{
            localStorage.setItem(KEY, ta.value || "");
            setStatus("Guardado en este navegador.");
          } catch(_) {
            setStatus("No se pudo guardar en este navegador.");
          }
        }

        if (action === "clear"){
          ta.value = "";
          try{ localStorage.removeItem(KEY); } catch(_) {}
          setStatus("Borrado.");
        }
      });

      // start closed
      showModel(false);
      setStatus("Mira el video y escribe tu respuesta. Puedes guardarla y luego comparar.");
    })();
  </script>
</section>




<section id="misunderstanding-compare">
  <div class="mc-wrap" role="region" aria-label="Actividad: compara tu respuesta (malentendido fonológico)">
    <header class="mc-head">
      <h2 class="mc-title">Ejercicio 5: explicar un malentendido en términos fonológicos</h2>
      <p class="mc-subtitle">
        Lee el diálogo, explica el malentendido en términos fonológicos y luego compara con un modelo.
        (Pista: hay un par de sonidos contrastivos en inglés, pero no en español.)
      </p>
    </header>

    <div class="mc-grid">
      <!-- LEFT: Student response -->
      <div class="mc-card" aria-label="Tu respuesta">
        <div class="mc-cardhead">
          <span class="mc-badge">Tu respuesta</span>
          <span class="mc-hint">Escribe primero. Después compara.</span>
        </div>

        <div class="mc-prompt" aria-label="Situación">
          <div class="mc-qtitle">Situación</div>

          <div class="mc-dialog" aria-label="Diálogo">
            <div class="mc-line"><strong>Estudiante:</strong> What is <em>cerrar</em>?</div>
            <div class="mc-line"><strong>Maestro:</strong> <em>cerrar</em> is to <strong>close</strong></div>
            <div class="mc-line"><strong>Estudiante:</strong> Too close to what?</div>
          </div>

          <div class="mc-qtext">
            Explica este malentendido en términos fonológicos. Intenta explicar cómo la intención del maestro se manifiesta
            en su pronunciación y cómo esta pronunciación afecta a la interpretación del estudiante.
          </div>
        </div>

        <label class="mc-label" for="mcAnswer">Tu explicación:</label>
        <textarea
          id="mcAnswer"
          class="mc-textarea"
          placeholder="Menciona el contraste (o no contraste) y cómo eso causa la confusión..."
        ></textarea>

        <div class="mc-actions" role="group" aria-label="Acciones">
          <button class="mc-btn" data-action="save" aria-label="Guardar en este navegador">Guardar</button>
          <button class="mc-btn" data-action="clear" aria-label="Borrar tu respuesta">Borrar</button>
          <button class="mc-btn mc-btn-primary" data-action="toggle" aria-label="Comparar con una posible respuesta">
            Comparar con una posible respuesta
          </button>
        </div>

        <div class="mc-status" aria-live="polite"></div>
      </div>

      <!-- RIGHT: Model answer -->
      <aside class="mc-card mc-model" aria-label="Posible respuesta para comparar" aria-hidden="true">
        <div class="mc-cardhead">
          <span class="mc-badge">Posible respuesta</span>
          <span class="mc-hint">Úsala para comparar, no para memorizar.</span>
        </div>

        <div class="mc-modelblock">
          <div class="mc-mtitle">Idea central</div>
          <ul class="mc-list">
            <li>
              En <strong>español</strong>, <strong>[s]</strong> y <strong>[z]</strong> no son contrastivos: se interpretan como
              alófonos de un mismo fonema <strong>/s/</strong>.
            </li>
            <li>
              En <strong>inglés</strong>, <strong>[s]</strong> y <strong>[z]</strong> sí pueden ser contrastivos (pueden distinguir palabras).
            </li>
          </ul>

          <div class="mc-mtitle">¿Dónde está el malentendido?</div>
          <ul class="mc-list">
            <li>
              En inglés, <strong>close</strong> (verbo ‘cerrar’) y <strong>close</strong> (adjetivo ‘cerca’) no se pronuncian igual:
              se diferencian por la <strong>sonoridad</strong> del sonido final:
              <div class="mc-ex"><strong>close</strong> ‘cerrar’ ≈ /kloʊ<strong>z</strong>/ (con [z])</div>
              <div class="mc-ex"><strong>close</strong> ‘cerca’ ≈ /kloʊ<strong>s</strong>/ (con [s])</div>
            </li>
            <li>
              El maestro hispanohablante no usa [s] vs [z] como contraste fonémico en su sistema: ambos caen bajo <strong>/s/</strong>.
              En ese contexto, su pronunciación tiende a usar <strong>[s]</strong>.
            </li>
            <li>
              El estudiante interpreta esa [s] con la categoría de su L1 (inglés) y entiende <strong>close</strong> como ‘cerca’,
              por eso pregunta: <em>“Too close to what?”</em>
            </li>
          </ul>
        </div>

        <div class="mc-compare">
          <div class="mc-mtitle">Mini-check de comparación</div>
          <ul class="mc-list mc-check">
            <li>¿Dijiste que <strong>[s]~[z]</strong> no es contraste fonémico en español (alófonos de /s/)?</li>
            <li>¿Explicaste que en inglés sí puede distinguir significados/palabras?</li>
            <li>¿Conectaste la pronunciación del maestro con la interpretación del estudiante?</li>
          </ul>
        </div>
      </aside>
    </div>
  </div>

  <style>
    /* ===== Scoped CSS: #misunderstanding-compare ===== */
    #misunderstanding-compare{
      --bg:#0f1216;
      --ink:#f3ead9;
      --muted:rgba(243,234,217,.74);
      --faint:rgba(243,234,217,.55);
      --border:rgba(243,234,217,.16);
      --border2:rgba(243,234,217,.10);
      --shadow:0 12px 30px rgba(0,0,0,.35);
      --r:18px;
      --r2:14px;
      --focus:rgba(120,180,255,.35);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--ink);
    }

    #misunderstanding-compare .mc-wrap{
      background:
        radial-gradient(900px 500px at 10% 0%, rgba(243,234,217,0.08), transparent 55%),
        radial-gradient(800px 500px at 90% 10%, rgba(225,204,170,0.06), transparent 60%),
        var(--bg);
      border:1px solid var(--border2);
      border-radius:24px;
      padding:18px 16px 14px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    #misunderstanding-compare .mc-head{padding:6px 6px 12px;}
    #misunderstanding-compare .mc-title{margin:0 0 6px;font-size:clamp(18px,2.1vw,24px);letter-spacing:.2px;}
    #misunderstanding-compare .mc-subtitle{margin:0;color:var(--muted);line-height:1.35;max-width:98ch;font-size:14px;}

    #misunderstanding-compare .mc-grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
      padding:12px 6px 10px;
      align-items:start;
    }

    #misunderstanding-compare .mc-card{
      background:linear-gradient(180deg, rgba(243,234,217,0.05), rgba(243,234,217,0.02));
      border:1px solid var(--border2);
      border-radius:var(--r);
      padding:12px;
      min-height:260px;
    }

    #misunderstanding-compare .mc-cardhead{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
      flex-wrap:wrap;
    }

    #misunderstanding-compare .mc-badge{
      font-size:12px;
      color:rgba(15,18,22,.92);
      background:rgba(243,234,217,.90);
      border-radius:999px;
      padding:2px 8px;
      font-weight:900;
      letter-spacing:.4px;
    }
    #misunderstanding-compare .mc-hint{color:var(--faint);font-size:12px;line-height:1.25;}

    #misunderstanding-compare .mc-prompt{
      background:linear-gradient(180deg, rgba(120,180,255,0.12), rgba(0,0,0,0));
      border:1px solid rgba(120,180,255,0.22);
      border-radius:var(--r2);
      padding:10px;
      margin-bottom:10px;
    }
    #misunderstanding-compare .mc-qtitle{
      font-weight:900;
      letter-spacing:.2px;
      margin-bottom:8px;
      font-size:13px;
      color:rgba(243,234,217,.92);
    }
    #misunderstanding-compare .mc-qtext{
      color:var(--muted);
      font-size:13px;
      line-height:1.35;
      margin-top:10px;
    }

    #misunderstanding-compare .mc-dialog{
      background:rgba(0,0,0,0.20);
      border:1px solid rgba(243,234,217,0.12);
      border-radius:12px;
      padding:10px;
      display:grid;
      gap:8px;
      color:rgba(243,234,217,.86);
      font-size:13px;
      line-height:1.3;
    }
    #misunderstanding-compare .mc-line em{color:rgba(243,234,217,.95);font-style:italic;}
    #misunderstanding-compare .mc-line strong{color:rgba(243,234,217,.95);}

    #misunderstanding-compare .mc-label{
      display:block;
      margin:10px 0 6px;
      font-size:12px;
      color:var(--faint);
      font-weight:900;
      letter-spacing:.2px;
    }

    #misunderstanding-compare .mc-textarea{
      width:100%;
      min-height:190px;
      resize:vertical;
      background:rgba(0,0,0,0.25);
      border:1px solid rgba(243,234,217,0.18);
      color:var(--ink);
      border-radius:12px;
      padding:10px 10px;
      font-size:13px;
      line-height:1.35;
    }
    #misunderstanding-compare .mc-textarea:focus-visible{
      outline:none;
      box-shadow:0 0 0 3px var(--focus);
      border-color:rgba(120,180,255,.55);
    }

    #misunderstanding-compare .mc-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:10px;
    }

    #misunderstanding-compare .mc-btn{
      background:rgba(243,234,217,0.06);
      color:var(--ink);
      border:1px solid var(--border);
      border-radius:999px;
      padding:8px 12px;
      font-size:13px;
      cursor:pointer;
      transition:transform 120ms ease, background 120ms ease, border-color 120ms ease;
      user-select:none;
      font-weight:800;
    }
    #misunderstanding-compare .mc-btn:hover{background:rgba(243,234,217,0.10);transform:translateY(-1px);}
    #misunderstanding-compare .mc-btn:active{transform:translateY(0px);}
    #misunderstanding-compare .mc-btn:focus-visible{outline:none;box-shadow:0 0 0 3px var(--focus);}
    #misunderstanding-compare .mc-btn-primary{background:rgba(243,234,217,0.12);border-color:rgba(243,234,217,0.22);}

    #misunderstanding-compare .mc-status{
      min-height:18px;
      margin-top:8px;
      color:var(--muted);
      font-size:13px;
    }

    #misunderstanding-compare .mc-model{display:none;}
    #misunderstanding-compare .mc-model.mc-show{display:block;}

    #misunderstanding-compare .mc-modelblock{
      background:rgba(243,234,217,0.04);
      border:1px solid rgba(243,234,217,0.10);
      border-radius:var(--r2);
      padding:10px;
    }

    #misunderstanding-compare .mc-mtitle{
      font-weight:900;
      letter-spacing:.2px;
      margin:0 0 8px;
      font-size:13px;
      color:rgba(243,234,217,.92);
    }

    #misunderstanding-compare .mc-list{
      margin:0 0 12px;
      padding-left:18px;
      color:var(--muted);
      display:grid;
      gap:6px;
      font-size:13px;
      line-height:1.3;
    }

    #misunderstanding-compare .mc-ex{
      margin-top:4px;
      padding-left:10px;
      border-left:2px solid rgba(243,234,217,0.18);
      color:rgba(243,234,217,0.78);
      font-size:12.5px;
      line-height:1.25;
    }

    #misunderstanding-compare .mc-compare{
      margin-top:10px;
      background:linear-gradient(180deg, rgba(120,180,255,0.10), rgba(0,0,0,0));
      border:1px solid rgba(120,180,255,0.18);
      border-radius:var(--r2);
      padding:10px;
    }
    #misunderstanding-compare .mc-check{margin-bottom:0;}

    @media (max-width: 980px){
      #misunderstanding-compare .mc-grid{grid-template-columns:1fr;}
    }
  </style>

  <script>
    (() => {
      const root = document.querySelector("#misunderstanding-compare");
      if (!root) return;

      const ta = root.querySelector("#mcAnswer");
      const model = root.querySelector(".mc-model");
      const status = root.querySelector(".mc-status");

      const KEY = "spa225_misunderstanding_compare_answer_v1";

      function setStatus(msg){ status.textContent = msg || ""; }

      function showModel(show){
        if (show){
          model.classList.add("mc-show");
          model.setAttribute("aria-hidden", "false");
          setStatus("Comparación abierta: revisa la posible respuesta a la derecha (o abajo en móvil).");
        } else {
          model.classList.remove("mc-show");
          model.setAttribute("aria-hidden", "true");
          setStatus("Comparación cerrada.");
        }
      }

      // restore saved (if any)
      try{
        const saved = localStorage.getItem(KEY);
        if (saved) ta.value = saved;
      } catch(_) {}

      root.addEventListener("click", (e) => {
        const btn = e.target.closest("button[data-action]");
        if (!btn) return;

        const action = btn.getAttribute("data-action");

        if (action === "toggle"){
          const isOpen = model.classList.contains("mc-show");
          showModel(!isOpen);
        }

        if (action === "save"){
          try{
            localStorage.setItem(KEY, ta.value || "");
            setStatus("Guardado en este navegador.");
          } catch(_) {
            setStatus("No se pudo guardar en este navegador.");
          }
        }

        if (action === "clear"){
          ta.value = "";
          try{ localStorage.removeItem(KEY); } catch(_) {}
          setStatus("Borrado.");
        }
      });

      // start closed
      showModel(false);
      setStatus("Escribe tu explicación. Puedes guardarla y luego comparar.");
    })();
  </script>
</section>





          
        </section>
      </section>

      <nav class="page-nav page-nav--bottom" aria-label="Week navigation (bottom)">
        <a class="nav-link" href="../index.html">← Back to weeks</a>

        <div class="nav-group" aria-label="Previous and next week (bottom)">
          <a class="nav-link" href="./week3.html">← Prev</a>
          <a class="nav-link" href="./week5.html">Next →</a>
        </div>
      </nav>
    </main>

    <footer class="footer" role="contentinfo">
      <p>
        Sitio construido por Andrés Correal. Esta página se construyó con la ayuda de los materiales de Grant Armstrong,
        Martiniano Etchart y Kiley Specht.
      </p>
    </footer>

    <script src="../week.js?v=3" defer></script>
  </body>
</html>
